"use strict";var url="http://47.104.29.94:8080/shop";angular.module("starter",["ionic","ngCordova","starter.services","starter.loginCtrl","starter.registerCtrl","starter.modulesCtrl","modules.services","starter.homeCtrl","starter.ordersCtrl","starter.bigLotteOrders","starter.allOrders","starter.walletCtrl","starter.walletIndexCtrl","starter.walletCharge","starter.walletChargeDetail","starter.walletChargeRecords","starter.walletChargeToCustomer","starter.walletChargeToCustomerWaiting","starter.clientsCtrl","client.services","starter.mineCtrl","starter.mineShopSetsCtrl","starter.mineTwoSetsCtrl","starter.chartsCtrl","starter.chartsTwoCtrl","starter.chartsHistoryCtrl","charts.services","starter.redBagCtrl","starter.redBagService"]).run(["$ionicPlatform","jpushService",function(e,t){e.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),t.initiateUI();var e=cordova.plugins.permissions;e.checkPermission(e.WRITE_EXTERNAL_STORAGE,function(t){if(!t.checkPermission){var r=function(){console.warn("没有赋予读取文件权限")};e.requestPermission(e.WRITE_EXTERNAL_STORAGE,function(e){e.checkPermission||r()},r)}},null)})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$httpProvider","$locationProvider",function(e,t,r,a,o){r.platform.ios.tabs.style("standard"),r.platform.ios.tabs.position("bottom"),r.platform.android.tabs.style("standard"),r.platform.android.tabs.position("bottom"),r.platform.ios.navBar.alignTitle("center"),r.platform.android.navBar.alignTitle("center"),r.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),r.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),r.platform.ios.views.transition("ios"),r.platform.android.views.transition("android"),r.views.maxCache(0),r.backButton.text(""),r.backButton.previousTitleText(!1),a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",a.defaults.headers.post.Accept="application/json, text/javascript, */*; q=0.01",a.defaults.headers.post["X-Requested-With"]="XMLHttpRequest",o.html5Mode(!1),e.state("login",{url:"/login/:fromWhich",templateUrl:"login/template/login.html",controller:"loginCtrl"}).state("register",{url:"/register",templateUrl:"login/template/register.html",controller:"registerCtrl",cache:!1}).state("modules",{url:"/modules",templateUrl:"modules/template/modules.html",controller:"modulesCtrl"}).state("modules.home",{url:"/home",templateUrl:"home/template/home.html",controller:"homeCtrl"}).state("modules.home.index",{url:"/index",templateUrl:"home/template/homeIndex.html",controller:"homeIndexCtrl"}).state("modules.home.public",{url:"/public",prefetchTemplate:!1,templateUrl:"home/template/homePublicNotes.html",controller:"homePublicCtrl"}).state("modules.home.publicDetail",{url:"/public/:index",prefetchTemplate:!1,templateUrl:"home/template/homePublicNotesDetail.html",controller:"homePublicDetailCtrl"}).state("modules.orders",{url:"/orders",prefetchTemplate:!1,templateUrl:"orders/template/orders.html",controller:"ordersCtrl"}).state("modules.orders.allOrders",{url:"/allOrders/:whetherPhone",cache:!1,prefetchTemplate:!1,templateUrl:"orders/template/allOrders.html",controller:"allOrdersCtrl"}).state("modules.orders.bigLotteOrders",{url:"/bigLotteOrders",cache:!1,prefetchTemplate:!1,templateUrl:"orders/template/bigLotteOrders.html",controller:"bigLotteOrdersCtrl"}).state("modules.orders.footballOrders",{url:"/footballOrders",cache:!1,prefetchTemplate:!1,templateUrl:"orders/template/footballOrders.html",controller:"footballOrdersCtrl"}).state("modules.orders.footballOrders.needOutput",{url:"/needOutput",cache:!1,prefetchTemplate:!1,templateUrl:"orders/template/needOutputFootball.html"}).state("modules.orders.footballOrders.needSend",{url:"/needSend",cache:!1,prefetchTemplate:!1,templateUrl:"orders/template/needSendFootball.html"}).state("modules.wallet",{url:"/wallet",templateUrl:"wallet/template/wallet.html",controller:"walletCtrl",prefetchTemplate:!1}).state("modules.wallet.index",{url:"/walletIndex",templateUrl:"wallet/template/walletIndex.html",controller:"walletIndexCtrl",prefetchTemplate:!1}).state("modules.wallet.charge",{url:"/charge/:type",templateUrl:"wallet/template/walletCharge.html",controller:"walletChargeCtrl",prefetchTemplate:!1,cache:!1}).state("modules.wallet.charge.verify",{url:"/chargeVerify/:id",templateUrl:"wallet/template/walletChargeVerify.html",controller:"walletChargeDetailCtrl",prefetchTemplate:!1,cache:!1}).state("modules.wallet.charge.records",{url:"/chargeRecords/:type",templateUrl:"wallet/template/walletChargeRecords.html",controller:"walletChargeRecordsCtrl",prefetchTemplate:!1}).state("modules.wallet.charge.toCustomer",{url:"/chargeToCustomer/:type",templateUrl:"wallet/template/walletChargeToCustomer.html",controller:"walletChargeToCustomerCtrl",prefetchTemplate:!1}).state("modules.wallet.charge.toCustomerWaitingInfo",{url:"/chargeToCustomerWaitingInfo/:type",templateUrl:"wallet/template/walletChargeToCustomer-waitting.html",controller:"walletChargeToCustomerWaitingCtrl",prefetchTemplate:!1,cache:!1}).state("modules.clients",{url:"/clients/:fromHome",templateUrl:"clients/template/clients.html",controller:"clientsCtrl",prefetchTemplate:!1}).state("modules.charts",{url:"/charts",templateUrl:"charts/template/charts.html",controller:"chartsCtrl"}).state("modules.charts.Time",{url:"/timeSummarize",templateUrl:"charts/template/chartsTime.html",controller:"chartsTimeCtrl"}).state("modules.charts.History",{url:"/historyCharts",templateUrl:"charts/template/chartsHistory.html",controller:"chartsHistoryCtrl"}).state("modules.charts.Clients",{url:"/clientsCharts",templateUrl:"charts/template/chartsClients.html",controller:"chartsClientsCtrl"}).state("modules.mine",{url:"/mine/:editAccount",templateUrl:"mine/template/mine.html",controller:"mineCtrl"}).state("modules.mine.shopSets",{url:"/shopSets",templateUrl:"mine/template/mineShopSets.html",controller:"mineShopSetsCtrl"}).state("modules.mine.shopAccount",{url:"/shopAccount",templateUrl:"mine/template/mineShopAccount.html",controller:"mineShopAccountCtrl"}).state("modules.mine.accountSets",{url:"/accountSets",templateUrl:"mine/template/mineAccountSets.html",controller:"mineAccountSetsCtrl"}).state("modules.redBag",{url:"/redBag",templateUrl:"redBag/template/redBag.html",controller:"redBagCtrl"}),t.otherwise("/login/normal")}]),angular.module("starter.chartsCtrl",[]).controller("chartsCtrl",["$scope","$rootScope","$state","dateCheck",function(e,t,r,a){t.nowModule={index:4},e.iSelectTab="Time",e.iHistroryTab=0;var o=new Date;e.search={startDate:new Date(o.getFullYear(),o.getMonth(),"01"),endDate:new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours()+1)},e.changeTab=function(t){e.iSelectTab=t,"History"===t&&(e.iHistroryTab=0),r.go("modules.charts."+t);var a=new Date;e.search={startDate:new Date(a.getFullYear(),o.getMonth(),"01"),endDate:new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours()+1)}},e.changeHistoryTab=function(t){e.iHistroryTab=t,e.$broadcast("changeHistoryTab",t)},e.searchDatas=function(){if(a.whetherInMonth(e.search.startDate,179)){var t={startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()};console.log(t),e.$broadcast("search"+e.iSelectTab+"Data",t)}},e.whetherInMonth=function(){a.whetherInMonth(e.search.startDate,179)}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("charts.services",[]).factory("chartsService",["Ajax","locals","$rootScope","$cordovaToast",function(e,t,r,a){return{AjaxGetTimeDatas:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(o){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.sendTo(url+"/home/timeIntervalStatistics",t.get("token"),{params:o});case 3:return n=r.sent,console.log(n),r.abrupt("return",n);case 8:r.prev=8,r.t0=r.catch(0),r.t0.info?a.showShortCenter(r.t0.info):a.showShortCenter(r.t0);case 11:case"end":return r.stop()}},r,this,[[0,8]])}));return function(e){return r.apply(this,arguments)}}(),AjaxGetTotalHistory:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(o){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.sendTo(url+"/home/historyBounsTotal",t.get("token"),{params:o});case 3:return n=r.sent,console.log(n),r.abrupt("return",n);case 8:r.prev=8,r.t0=r.catch(0),r.t0.info?a.showShortCenter(r.t0.info):a.showShortCenter(r.t0);case 11:case"end":return r.stop()}},r,this,[[0,8]])}));return function(e){return r.apply(this,arguments)}}()}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.chartsHistoryCtrl",[]).controller("chartsHistoryCtrl",["$scope","Ajax","locals","chartsService","dateCheck","$cordovaToast",function(e,t,r,a,o,n){var s=new Date;e.allBonusData=[],e.showLastPic=!1;var i={startDate:s.getFullYear()+"-"+(s.getMonth()+1)+"-01",endDate:s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()};a.AjaxGetTotalHistory(i).then(function(t){console.log(t),t&&(e.totalHistoryData=t.data)});var c=e.moreBonusData={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,startDate:i.startDate,endDate:i.endDate},loadMore:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!0!==c.moredata||!1!==c.alter){a.next=10;break}return o=c.params,a.next=5,t.sendTo(url+"/home/historyBouns",r.get("token"),{params:o});case 5:s=a.sent,console.log(s),s.data.length===c.params.pageSize?(e.allBonusData=c.eachOrder=c.eachOrder.concat(s.data),c.params.pageNumber+=1):0!==s.data.length&&s.data.length<=c.params.pageSize?(e.allBonusData=c.eachOrder=c.eachOrder.concat(s.data),e.showLastPic=!0,c.moredata=!1):0===s.data.length&&(e.showLastPic=!0,c.moredata=!1),c.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),a.t0.info?n.showShortCenter(a.t0.info):n.showShortCenter(a.t0);case 15:case"end":return a.stop()}},a,this,[[0,12]])}));return function(){return a.apply(this,arguments)}}()};e.$on("searchHistoryData",function(t,r){e.showLastPic=!1,a.AjaxGetTotalHistory(r).then(function(t){console.log(t),t&&(e.totalHistoryData=t.data)}),c.moredata=!0,c.params.pageNumber=1,e.allBonusData.length=0,c.params.startDate=r.startDate,c.params.endDate=r.endDate,c.loadMore(),c.alter=!0})}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.chartsTwoCtrl",["charts.services"]).controller("chartsTimeCtrl",["chartsService","$scope","$cordovaToast",function(e,t,r){var a=new Date,o={startDate:a.getFullYear()+"-"+(a.getMonth()+1)+"-01",endDate:a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()};e.AjaxGetTimeDatas(o).then(function(e){console.log(e),e&&t.$apply(function(){t.timeDatas=e.data})}),t.$on("searchTimeData",function(r,a){e.AjaxGetTimeDatas(a).then(function(e){console.log(e),e&&t.$apply(function(){t.timeDatas=e.data})})})}]).controller("chartsClientsCtrl",["chartsService","$rootScope","$scope","locals","Ajax",function(e,t,r,a,o){r.allClientsData=[],r.showLastPic=!1;var n=new Date,s={startDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-01",endDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()},i=r.moreClientsData={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,startDate:s.startDate,endDate:s.endDate},loadMore:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!0!==i.moredata||!1!==i.alter){e.next=10;break}return t=i.params,e.next=5,o.sendTo(url+"/home/customerStatistics",a.get("token"),{params:t});case 5:n=e.sent,console.log(n),n.data.length===i.params.pageSize?(r.allClientsData=i.eachOrder=i.eachOrder.concat(n.data),i.params.pageNumber+=1):0!==n.data.length&&n.data.length<=i.params.pageSize?(r.allClientsData=i.eachOrder=i.eachOrder.concat(n.data),r.showLastPic=!0,i.moredata=!1):0===n.data.length&&(r.showLastPic=!0,i.moredata=!1),i.alter=!1,r.$broadcast("scroll.infiniteScrollComplete");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.info?$cordovaToast.showShortCenter(e.t0.info):$cordovaToast.showShortCenter(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()};r.$on("searchClientsData",function(e,t){r.showLastPic=!1,i.moredata=!0,i.params.pageNumber=1,r.allClientsData.length=0,i.params.startDate=t.startDate,i.params.endDate=t.endDate,i.loadMore(),i.alter=!0})}]),angular.module("starter.services",[]).factory("locals",["$window",function(e){return{set:function(t,r){e.localStorage[t]=r},get:function(t,r){return e.localStorage[t]||r},setObject:function(t,r){e.localStorage[t]=JSON.stringify(r)},getObject:function(t){return JSON.parse(e.localStorage[t]||"{}")}}}]).factory("Ajax",["$http","$q","$ionicLoading","$state","$cordovaToast",function(e,t,r,a,o){var n={};return n.sendTo=function(n,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=i.data,l=i.params,u=i.errorText,h=void 0===u?"网络超时,请重试":u,d=i.closeLoading,p=void 0===d||d,g=i.haveCloseLoading,m=void 0===g||g;console.log(l),console.log(m),m&&r.show();var f=t.defer();return e({method:"post",url:n,data:c,params:l,headers:{"Content-Type":"application/json","Auth-Token":s},timeout:15e3}).success(function(e){"0"===e.error?f.resolve(e):"1110"===e.error?(o.showShortCenter("登录过期,请重新登录"),a.go("login",{fromWhich:"normal"})):f.reject(e),r.hide()}).error(function(e){null===e?f.reject({info:h}):f.reject(e),p&&r.hide()}),f.promise},n}]).factory("addBefore",[function(){var e={};return e.addHour0=function(e){return(1==e.getHours().toString().length?"0"+e.getHours().toString():e.getHours().toString())+":"+(1==e.getMinutes().toString().length?"0"+e.getMinutes().toString():e.getMinutes().toString())},e.addMMDD0=function(){var e=new Date,t="",r="";return t=1==(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1).toString():(e.getMonth()+1).toString(),r=1==e.getDate().toString().length?"0"+e.getDate().toString():e.getDate().toString(),e.getFullYear()+"-"+t+"-"+r},e.addMMDD0Input=function(e){var t=e.split(".");return 1==t[1].length&&(t[1]="0"+t[1]),1==t[2].length&&(t[2]="0"+t[2]),t.join(".")},e}]).factory("dateCheck",["$cordovaToast",function(e){var t=new Date;return{whetherInMonth:function(r,a){return!((t.getTime()-r.getTime())/1e3/60/60/24>a+1&&(e.showShortCenter("只能查询过去"+(a+1)+"天的数据"),1))}}}]).factory("jpushService",[function(){return{initiateUI:function(){try{window.JPush.init(),window.JPush.setDebugMode(!0),console.log("初始化成功!")}catch(e){console.log(e)}},setTagsAndAlias:function(e,t){try{console.log(e,t),window.JPush.setTags({sequence:1,tags:e},function(e){console.log(e,"设置tag成功")},function(e){console.log(e,"设置tag失败")}),console.log(window.JPush.getAlias())}catch(e){console.log(e)}},onTagsWithAlias:function(e){try{console.log(e),console.log(e.resultCode),console.log(e.tags,e.alias)}catch(e){console.log(e)}}}}]).service("PicMethods",["locals","$rootScope","$cordovaCamera","$cordovaImagePicker","$cordovaFileTransfer","$ionicLoading","$cordovaToast",function(e,t,r,a,o,n,s){var i=1;function c(t,r,a){var c={fileKey:"filedata",fileName:t.split("/").pop(),mimeType:"image/jpg",timeout:4e4,headers:{"Auth-Token":e.get("token")}},l=url+"/home/uploadImg";n.show({template:'<p class="spinner-icon"><ion-spinner icon="bubbles" class="spinner-balanced"></ion-spinner><span>上传中...'}),o.upload(l,t,c).then(function(e){var o=JSON.parse(e.response);console.log(o),r(o,t,i===a),i===a?i=1:i++},function(e){s.showShortCenter("部分图片上传失败"+e.exceptio),n.hide()},function(e){})}this.takePhoto=function(e,t){var a={quality:100,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,mediaType:0,cameraDirection:0,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0};r.getPicture(a).then(function(t){c(t,e)},function(e){alert(e)})},this.pickImage=function(e,t){a.getPictures({maximumImagesCount:3,quality:100}).then(function(r){r.length+t>3&&(s.showShortCenter("最多上传3张凭证图片"),r.splice(3-t-r.length,t+r.length-3)),console.log(r);var a=!0,o=!1,n=void 0;try{for(var i,l=r[Symbol.iterator]();!(a=(i=l.next()).done);a=!0)c(i.value,e,r.length)}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}},function(e){alert(e)})},this.downloadFile=function(e,r,a){var n=e.split("/").pop(),i=cordova.file.externalRootDirectory+n;console.log(e),o.download(e,i,{},!0).then(function(e){t.$broadcast(r,e.nativeURL,a)},function(e){s.showShortCenter("获取图片失败,请重试"+e)},function(e){})}}]).directive("instMessage",[function(){return{templateUrl:"./common/template/instMessage.html",restrict:"E",scope:!1}}]).constant("$ionicLoadingConfig",{hideOnStateChange:!0,template:'<p class="spinner-icon"><ion-spinner icon="bubbles" class="spinner-balanced"></ion-spinner><span>加载中...',duration:15e3});function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.clientsCtrl",[]).controller("clientsCtrl",["$scope","$rootScope","locals","Ajax","$ionicModal","clientService","$state","$stateParams","dateCheck","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l){t.nowModule={index:3},e.isBetClients="fromHome"!==i.fromHome,e.oView=n.featureChoose("fromHome"===i.fromHome?"assist":"betters"),e.operations={editdRemarkName:"",password:""},e.allClients=[],e.allRights=n.rights,e.oCreateRole={account:"",phone:void 0,loginPassword:"",payPassword:""},e.showLastPic=!1;var u=new Date,h=[r.getObject("userRights"),r.getObject("userInfo")],d=h[0],p=h[1];e.search={startDate:new Date(u.getFullYear(),u.getMonth(),u.getDate()-179),endDate:new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours()+1),name:"",customerName:null},e.arrow=[!0,!0,!0,!0];var g=e.moreClients={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,type:"fromHome"===i.fromHome?2:3,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,s,i,c,u,h,d,p,m,f,w,v,S,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==g.moredata||!1!==g.alter){t.next=63;break}return o=g.params,t.next=5,a.sendTo(url+"/client/managerList",r.get("token"),{params:o});case 5:if(s=t.sent,console.log(s),s.data.length!==g.params.pageSize){t.next=33;break}if(e.allClients=g.eachOrder=g.eachOrder.concat(s.data),e.isBetClients){t.next=30;break}for(i=!0,c=!1,u=void 0,t.prev=13,h=e.allClients[Symbol.iterator]();!(i=(d=h.next()).done);i=!0)p=d.value,n.addChineseRights(p);t.next=21;break;case 17:t.prev=17,t.t0=t.catch(13),c=!0,u=t.t0;case 21:t.prev=21,t.prev=22,!i&&h.return&&h.return();case 24:if(t.prev=24,!c){t.next=27;break}throw u;case 27:return t.finish(24);case 28:return t.finish(21);case 29:console.log(e.allClients);case 30:g.params.pageNumber+=1,t.next=61;break;case 33:if(!(0!==s.data.length&&s.data.length<=g.params.pageSize)){t.next=60;break}if(e.allClients=g.eachOrder=g.eachOrder.concat(s.data),e.isBetClients){t.next=56;break}for(m=!0,f=!1,w=void 0,t.prev=39,v=e.allClients[Symbol.iterator]();!(m=(S=v.next()).done);m=!0)C=S.value,n.addChineseRights(C);t.next=47;break;case 43:t.prev=43,t.t1=t.catch(39),f=!0,w=t.t1;case 47:t.prev=47,t.prev=48,!m&&v.return&&v.return();case 50:if(t.prev=50,!f){t.next=53;break}throw w;case 53:return t.finish(50);case 54:return t.finish(47);case 55:console.log(e.allClients);case 56:e.showLastPic=!0,g.moredata=!1,t.next=61;break;case 60:0===s.data.length&&(e.showLastPic=!0,g.moredata=!1);case 61:g.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 63:t.next=68;break;case 65:t.prev=65,t.t2=t.catch(0),t.t2.info?l.showShortCenter(t.t2.info):l.showShortCenter(t.t2);case 68:case"end":return t.stop()}},t,this,[[0,65],[13,17,21,29],[22,,24,28],[39,43,47,55],[48,,50,54]])}));return function(){return t.apply(this,arguments)}}()};e.chooseOne=function(t){1===p.type||"assist"!==t?(e.allClients.length=0,e.search.name="",g.params.name="",g.moredata=!0,g.params.pageNumber=1,"betters"===t?(e.isBetClients=!0,g.params.type=3,e.oView=n.featureChoose("betters")):(e.isBetClients=!1,g.params.type=2,e.oView=n.featureChoose("assist")),g.loadMore(),g.alter=!0):l.showShortCenter("只有店主有角色管理的权限")},e.searchClients=function(){c.whetherInMonth(e.search.startDate,179)&&(g.params={pageNumber:1,pageSize:15,type:g.params.type,name:e.search.name,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},e.showLastPic=!1,e.allClients.length=0,g.moredata=!0,g.loadMore(),g.alter=!0)},e.editName=function(t){e.operations.editdRemarkName="",e.thisClient=e.allClients[t],console.log(e.thisClient),e.editNameModal.show()},e.submitEditName=function(){n.AjaxEditName(e.thisClient.customer.id,e.operations.editdRemarkName)},e.$on("editNameSuc",function(t,r){e.editNameModal.hide(),e.thisClient.customer.remark=r}),e.frozeClient=function(t){!1!==d.buyerAccountStopUse.check?(e.operations.password="",e.thisClient=e.allClients[t],e.thisClient.index=t,console.log(e.thisClient),e.frozenClientModal.show()):l.showShortCenter("您没有冻结和删除账号的权限")},e.confirmFrozenClient=function(){""===e.operations.password?l.showShortCenter("请输入密码"):n.AjaxFrozeClient(e.thisClient.customer.id,e.operations.password)},e.$on("frozeClientSuc",function(t){e.frozenClientModal.hide(),!0===e.isBetClients?e.thisClient.customer.delFlag="1":e.allClients.splice(e.thisClient.index,1)}),e.cancelFrozen=function(t){e.operations.password="",e.thisClient=e.allClients[t],e.cancelFrozenClientModal.show()},e.confirmCancelFrozen=function(){""===e.operations.password?l.showShortCenter("请输入密码"):n.AjaxFrozeClient(e.thisClient.customer.id,e.operations.password,{str:"cancel"})},e.$on("cancelFrozeClientSuc",function(){e.cancelFrozenClientModal.hide(),e.thisClient.customer.delFlag="0"}),e.openCreateAssist=function(){e.oCreateRole.account="",e.oCreateRole.phone="",e.oCreateRole.loginPassword="",e.oCreateRole.payPassword="";var t=!0,r=!1,a=void 0;try{for(var o,n=e.allRights[Symbol.iterator]();!(t=(o=n.next()).done);t=!0)o.value.check=!1}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}console.log(e.allRights),e.createAssistModal.show()},e.submitCreateAssist=function(){console.log(e.allRights);var t=n.getUploadRightNum(e.allRights),r={account:e.oCreateRole.account,phone:e.oCreateRole.phone,passWord:e.oCreateRole.loginPassword,payPassWord:e.oCreateRole.payPassword,resource:t.join(",")};n.AjaxCreateAssist(r)},e.$on("createRoleSuc",function(){l.showShortCenter("创建角色成功"),e.createAssistModal.hide(),e.allClients.length=0,e.search.name="",g.params.name="",g.moredata=!0,g.params.pageNumber=1}),e.gotoDetail=function(t){r.set("whetherFromClientToAllOrder","true"),s.go("modules.orders.allOrders",{whetherPhone:e.allClients[t].customer.phone})},e.doManageRight=function(t){e.thisClient=e.allClients[t],console.log(e.thisClient),e.rightsManageModal.show()},e.saveManageRight=function(){console.log(e.thisClient);var t=n.getUploadRightNum(e.thisClient.rightsArr);n.AjaxSaveManageRight({id:e.thisClient.customer.id,resource:t.join(",")})},e.$on("editRightsSuc",function(){l.showShortCenter("修改权限成功"),e.rightsManageModal.hide()}),e.whetherInMonth=function(){c.whetherInMonth(e.search.startDate,179)},o.fromTemplateUrl("editNameModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.editNameModal=t}),o.fromTemplateUrl("frozenClientModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.frozenClientModal=t}),o.fromTemplateUrl("cancelFrozenClientModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.cancelFrozenClientModal=t}),o.fromTemplateUrl("rightsManageModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rightsManageModal=t}),o.fromTemplateUrl("createAssistModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.createAssistModal=t})}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.clientsDetailCtrl",[]).controller("clientsDetailCtrl",["$scope","$rootScope","locals","Ajax","$ionicModal","clientService","$stateParams","clientDetailService","$ionicScrollDelegate","dateCheck","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l,u){e.whetherOrders=!0,e.allStatus=i.featureChoose("orders").allStatus,e.allClientsDetail=[],e.allBalanceDetail=[];var h=new Date;h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),e.search={startDate:new Date(h.getFullYear(),h.getMonth(),h.getDate()-179),endDate:new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()+1)},i.getAllTotalAmount({customerId:1*s.id}).then(function(t){e.allTotalAmount=t.data}),e.choosedPerson=i.choosedDetailAccount;var d=e.moreClientsDetail={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,customerId:1*s.id,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),status:void 0},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,n,s,c,l,h,p,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==d.moredata||!1!==d.alter){t.next=29;break}return o=d.params,t.next=5,a.sendTo(url+"/client/buyerOrderDetails",r.get("token"),{params:o});case 5:for(n=t.sent,console.log(n),s=!0,c=!1,l=void 0,t.prev=10,h=n.data[Symbol.iterator]();!(s=(p=h.next()).done);s=!0)g=p.value,i.addChineseStatus(g);t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),c=!0,l=t.t0;case 18:t.prev=18,t.prev=19,!s&&h.return&&h.return();case 21:if(t.prev=21,!c){t.next=24;break}throw l;case 24:return t.finish(21);case 25:return t.finish(18);case 26:n.data.length===d.params.pageSize?(e.allClientsDetail=d.eachOrder=d.eachOrder.concat(n.data),d.params.pageNumber+=1):0!==n.data.length&&n.data.length<=d.params.pageSize?(e.allClientsDetail=d.eachOrder=d.eachOrder.concat(n.data),d.moredata=!1):0===n.data.length&&(d.moredata=!1),d.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(0),t.t1.info?u.showShortCenter(t.t1.info):u.showShortCenter(t.t1);case 34:case"end":return t.stop()}},t,this,[[0,31],[10,14,18,26],[19,,21,25]])}));return function(){return t.apply(this,arguments)}}()},p=e.moreBalanceDetail={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,customerId:1*s.id,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),type:void 0},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,n,s,c,l,h,d,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==p.moredata||!1!==p.alter){t.next=29;break}return o=p.params,t.next=5,a.sendTo(url+"/client/buyerBalanceDetails",r.get("token"),{params:o});case 5:for(n=t.sent,console.log(n),s=!0,c=!1,l=void 0,t.prev=10,h=n.data[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)g=d.value,i.addChineseStatus2(g);t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),c=!0,l=t.t0;case 18:t.prev=18,t.prev=19,!s&&h.return&&h.return();case 21:if(t.prev=21,!c){t.next=24;break}throw l;case 24:return t.finish(21);case 25:return t.finish(18);case 26:n.data.length===p.params.pageSize?(e.allBalanceDetail=p.eachOrder=p.eachOrder.concat(n.data),p.params.pageNumber+=1):0!==n.data.length&&n.data.length<=p.params.pageSize?(e.allBalanceDetail=p.eachOrder=p.eachOrder.concat(n.data),p.moredata=!1):0==n.data.length&&(p.moredata=!1),p.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(0),t.t1.info?u.showShortCenter(t.t1.info):u.showShortCenter(t.t1);case 34:case"end":return t.stop()}},t,this,[[0,31],[10,14,18,26],[19,,21,25]])}));return function(){return t.apply(this,arguments)}}()};e.chooseOne=function(t){"orders"===t?(e.whetherOrders=!0,d.params.status=void 0,e.allStatus=i.featureChoose("orders").allStatus,g()):(e.whetherOrders=!1,p.params.type=void 0,e.allStatus=i.featureChoose("account").allStatus,m()),c.$getByHandle("mainScroll").scrollTop()},e.searchDetail=function(){l.whetherInMonth(e.search.startDate,179)&&(e.whetherOrders?g():m())},e.filterStatus=function(t){var r=[];e.whetherOrders?(r=[{match:function(e){if("出票失败"===e)return!0},action:function(){d.params.status=-1}},{match:function(e){if("等待出票"===e)return!0},action:function(){d.params.status=1}},{match:function(e){if("出票成功"===e)return!0},action:function(){d.params.status=2}}],g()):(r=[{match:function(e){if("账户充值"===e)return!0},action:function(){p.params.type=1}},{match:function(e){if("账户提现"===e)return!0},action:function(){p.params.type=2}},{match:function(e){if("出票成功"===e)return!0},action:function(){p.params.type=3}},{match:function(e){if("出票失败"===e)return!0},action:function(){p.params.type=4}}],m()),function(e){var t=!0,a=!1,o=void 0;try{for(var n,s=r[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;if(i.match(e))return i.action(e)}}catch(e){a=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw o}}}(t)};function g(){d.moredata=!0,d.params.pageNumber=1,d.params.startDate=e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),d.params.endDate=e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),e.allClientsDetail.length=0,d.loadMore(),d.alter=!0}function m(){p.moredata=!0,p.params.pageNumber=1,p.params.startDate=e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),p.params.endDate=e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),e.allBalanceDetail.length=0,p.loadMore(),p.alter=!0}e.whetherInMonth=function(){l.whetherInMonth(e.search.startDate,179)}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("client.services",[]).factory("walletIndexService",[function(){return{feature:"charge"}}]).factory("clientService",["Ajax","locals","$rootScope","$cordovaToast",function(e,t,r,a){var o={h1:"冻结账户",text1:"冻结",text2:"立即冻结",text3:"*彩民账户冻结后，用户将无法向彩店提交订单,直到彩店解除冻结。",text4:"最近下单",text5:"店内余额"},n={h1:"删除角色",text1:"删除",text2:"立即删除",text3:"*销售员角色删除后，将无法恢复，请慎重删除；",text4:"店内充值",text5:"店内提现"};return{featureChoose:function(e){return"betters"===e?o:"assist"===e?n:void 0},AjaxEditName:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n,s){var i,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i={userId:n,remark:s},o.next=4,e.sendTo(url+"/client/updateRemark",t.get("token"),{params:i});case 4:c=o.sent,console.log(c),r.$broadcast("editNameSuc",s),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0);case 12:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e,t){return o.apply(this,arguments)}}(),AjaxFrozeClient:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n,s){var i,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).str;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i={userId:n,payPassword:s,str:c},o.next=4,e.sendTo(url+"/client/operationCustomer",t.get("token"),{params:i});case 4:o.sent,c?r.$broadcast("cancelFrozeClientSuc"):r.$broadcast("frozeClientSuc"),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0);case 11:case"end":return o.stop()}},o,this,[[0,8]])}));return function(e,t){return o.apply(this,arguments)}}(),AjaxCreateAssist:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/client/createRole",t.get("token"),{params:n});case 3:o.sent,r.$broadcast("createRoleSuc"),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0);case 10:case"end":return o.stop()}},o,this,[[0,7]])}));return function(e){return o.apply(this,arguments)}}(),AjaxSaveManageRight:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/client/updateResource",t.get("token"),{params:n});case 3:o.sent,r.$broadcast("editRightsSuc"),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0);case 10:case"end":return o.stop()}},o,this,[[0,7]])}));return function(e){return o.apply(this,arguments)}}(),getUploadRightNum:function(e){var t=e.filter(function(e){return!0===e.check});return Array.from(t,function(e){return e.rightNum})},addChineseRights:function(e){var t=[],r=!0,a=!1,o=void 0;try{for(var n,s=Object.values(e.roles)[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i=n.value;switch(i.rightNum){case"9":i.name="充值";break;case"10":i.name="提现";break;case"11":i.name="充值审核";break;case"12":i.name="提现审核";break;case"13":i.name="红包派发";break;case"15":i.name="彩民账号停用";break;case"17":i.name="出票";break;case"18":i.name="委托";break;case"19":i.name="派奖"}t.push(i)}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return e.rightsArr=t,e},broadcastToAllOrder:function(){r.$broadcast("fromClientToAllOrder")},whichFeature:{},rights:[{right:"充值",check:!1,rightNum:9},{right:"提现",check:!1,rightNum:10},{right:"充值审核",check:!1,rightNum:11},{right:"提现审核",check:!1,rightNum:12},{right:"红包派发",check:!1,rightNum:13},{right:"彩民账号停用",check:!1,rightNum:15},{right:"出票",check:!1,rightNum:17},{right:"委托",check:!1,rightNum:18},{right:"派奖",check:!1,rightNum:19}]}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.homeCtrl",["home.services"]).controller("homeCtrl",["$rootScope","$scope",function(e,t){e.nowModule={index:0}}]).controller("homeIndexCtrl",["$scope","locals","$state","$ionicModal","walletIndexService","homeShopSetsService","addBefore","$rootScope","PicMethods","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l){e.thisShopInfo=t.getObject("shopPerformance"),e.shopSetsView=e.thisShopInfo.RequestShopInformation,e.userInfo=t.getObject("userInfo"),e.hideStatus=!0,t.set("bFromHomeSendPrize",0);var u=new Date;e.operations={startTime:new Date(u.getFullYear(),u.getMonth(),u.getDate(),e.shopSetsView.startTime.split(":")[0],e.shopSetsView.startTime.split(":")[1]),endTime:new Date(u.getFullYear(),u.getMonth(),u.getDate(),e.shopSetsView.endTime.split(":")[0],e.shopSetsView.endTime.split(":")[1]),password:""},console.log(t.get("token")),n.getPublicNote().then(function(t){e.$apply(function(){e.publicNotes=t.data}),console.log(e.publicNotes)}),e.toSendPrize=function(){t.set("bFromHomeSendPrize",1),r.go("modules.orders.bigLotteOrders")},new QRCode(document.getElementById("qrcode_1"),e.thisShopInfo.QRCodeUrl);var h=!0;e.showBigQr=function(){e.modalQr.show(),!0===h&&(new QRCode(document.getElementById("qrcode_2"),{text:e.thisShopInfo.QRCodeUrl,width:500,height:500,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),new QRCode(document.getElementById("qrcode_3"),{text:"http://47.104.29.94:8080/apk/ddb-buyer.apk",width:500,height:500,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})),h=!1},e.gotoWalletOperation=function(e){o.feature=e,r.go("modules.wallet.charge",{type:e})},e.openEditSaleTimeModal=function(){e.operations.password="",e.editSaleTimeModal.show()},e.confirmEditSaleTime=function(){var t={startTime:s.addHour0(e.operations.startTime),endTime:s.addHour0(e.operations.endTime),ManagePassword:e.operations.password};n.AjaxUpdateShopInformation(t,"editSaleTimeModal")},e.$on("homeOperationsSuc",function(r,a){l.showShortCenter("修改成功"),e.shopSetsView.startTime=s.addHour0(e.operations.startTime),e.shopSetsView.endTime=s.addHour0(e.operations.endTime),t.setObject("shopPerformance",e.thisShopInfo),console.log(t.getObject("shopPerformance")),e[a].hide()}),e.closeEditSaleTimeModal=function(){e.editSaleTimeModal.hide()},e.goClientAssist=function(){r.go("modules.clients",{fromHome:"fromHome"})},a.fromTemplateUrl("biggerQR.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalQr=t}),a.fromTemplateUrl("./common/template/editSaleTimeModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.editSaleTimeModal=t})}]).controller("homePublicCtrl",["$scope","$state","Ajax","locals","$cacheFactory",function(e,t,r,a,o){var n=this;e.allNotes=[];var s=e.morePublicNotes={moredata:!0,eachOrder:[],params:{pageNumber:1,pageSize:20},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,i,c,l,u,h,d,p,g,m,f,w,v,S;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==s.moredata){t.next=57;break}return o=s.params,t.next=5,r.sendTo(url+"/home/notice",a.get("token"),{params:o});case 5:if((i=t.sent).data.length!==s.params.pageSize){t.next=30;break}for(e.allNotes=s.eachOrder=s.eachOrder.concat(i.data),c=!0,l=!1,u=void 0,t.prev=11,h=e.allNotes[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)(p=d.value).publicDate=p.updateDate.split(" ")[0];t.next=19;break;case 15:t.prev=15,t.t0=t.catch(11),l=!0,u=t.t0;case 19:t.prev=19,t.prev=20,!c&&h.return&&h.return();case 22:if(t.prev=22,!l){t.next=25;break}throw u;case 25:return t.finish(22);case 26:return t.finish(19);case 27:s.params.pageNumber+=1,t.next=55;break;case 30:if(!(0!==i.data.length&&i.data.length<=s.params.pageSize)){t.next=54;break}for(e.allNotes=s.eachOrder=s.eachOrder.concat(i.data),g=!0,m=!1,f=void 0,t.prev=35,w=e.allNotes[Symbol.iterator]();!(g=(v=w.next()).done);g=!0)(S=v.value).publicDate=S.updateDate.split(" ")[0];t.next=43;break;case 39:t.prev=39,t.t1=t.catch(35),m=!0,f=t.t1;case 43:t.prev=43,t.prev=44,!g&&w.return&&w.return();case 46:if(t.prev=46,!m){t.next=49;break}throw f;case 49:return t.finish(46);case 50:return t.finish(43);case 51:s.moredata=!1,t.next=55;break;case 54:0===i.data.length&&(s.moredata=!1);case 55:console.log(e.allNotes),e.$broadcast("scroll.infiniteScrollComplete");case 57:t.next=62;break;case 59:t.prev=59,t.t2=t.catch(0),t.t2.info?$cordovaToast.showShortCenter(t.t2.info):$cordovaToast.showShortCenter(t.t2);case 62:case"end":return t.stop()}},t,n,[[0,59],[11,15,19,27],[20,,22,26],[35,39,43,51],[44,,46,50]])}));return function(){return t.apply(this,arguments)}}()};e.checkDetail=function(r){o("oneNotes").put("note",e.allNotes[r]),t.go("modules.home.publicDetail",{index:r})}}]).controller("homePublicDetailCtrl",["$scope","$stateParams","$cacheFactory",function(e,t,r){t.index;var a=r.get("oneNotes");e.thisNote=a.get("note"),a.destroy()}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("home.services",[]).factory("homeShopSetsService",["Ajax","locals","$rootScope","$cordovaToast",function(e,t,r,a){return{AjaxUpdateShopInformation:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n,s){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/ownSetUp/updateShopInformation",t.get("token"),{params:n});case 3:return i=o.sent,console.log(i),r.$broadcast("homeOperationsSuc",s),o.abrupt("return",i);case 9:o.prev=9,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0);case 12:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e,t){return o.apply(this,arguments)}}(),getPublicNote:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(){var o,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o={pageNumber:1,pageSize:4},r.next=4,e.sendTo(url+"/home/notice",t.get("token"),{params:o});case 4:return n=r.sent,console.log(n),r.abrupt("return",n);case 9:r.prev=9,r.t0=r.catch(0),r.t0.info?a.showShortCenter(r.t0.info):a.showShortCenter(r.t0);case 12:case"end":return r.stop()}},r,this,[[0,9]])}));return function(){return r.apply(this,arguments)}}()}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.loginCtrl",["starter.services"]).controller("loginCtrl",["$scope","Ajax","$ionicPopover","$state","locals","$rootScope","$cordovaToast","$ionicModal","jpushService","PicMethods","$timeout","$location",function(e,t,r,a,o,n,s,i,c,l,u,h){var d=this,p=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendTo(url+"/auth/login","",{data:r});case 2:n=e.sent,o.setObject("userInfo",n.data.customer),o.set("token",n.data.token),o.setObject("userRights",n.data.roles),(s=[]).push(n.data.customer.id),console.log(s),c.setTagsAndAlias(s),a.go("modules.home.index"),g().then(function(){console.log(o.getObject("shopPerformance")),a.go("modules.home.index")});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.sendTo(url+"/home/RequestHomeInformation",o.get("token"));case 3:n=r.sent,console.log(n),e.shopName=n.data.RequestShopInformation.name,o.setObject("shopPerformance",n.data),a.go("modules.home.index"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),r.t0.info?s.showShortCenter(r.t0.info):s.showShortCenter(r.t0);case 13:case"end":return r.stop()}},r,this,[[0,10]])}));return function(){return r.apply(this,arguments)}}(),m=h.path().split("/");console.log(m[2]),console.log(o.getObject("loginAccount")),"fromExitLogin"===m[2]?(e.userLogin={phone:o.getObject("loginAccount").phone,password:""},e.selectRemberPass=!1):(e.userLogin={phone:o.getObject("loginAccount").phone,password:o.getObject("loginAccount").password},e.selectRemberPass=o.getObject("loginAccount").selectRemberPass),e.whetherWrong=!1,e.forgetParams={phone:void 0,verifyCode:void 0,resetPassword1:"",resetPassword2:""},!0===e.selectRemberPass&&p(e.userLogin),e.deleteLogin=function(t){"phone"===t?e.userLogin.phone="":e.userLogin.password=""},e.login=_asyncToGenerator(regeneratorRuntime.mark(function r(){var a,i,l,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log(window.JPush),!e.userLogin.phone||!e.userLogin.password){r.next=28;break}return r.prev=2,a={phone:e.userLogin.phone,password:e.userLogin.password},r.next=6,t.sendTo(url+"/auth/login","",{data:a});case 6:i=r.sent,console.log(i),o.setObject("userInfo",i.data.customer),o.set("token",i.data.token),o.setObject("userRights",i.data.roles),n.whetherHadChangeAccount=e.userLogin.phone!==o.getObject("loginAccount").phone,(l=[]).push(i.data.customer.id),console.log(l),c.setTagsAndAlias(l),u={},!0===e.selectRemberPass?(u={phone:e.userLogin.phone,password:e.userLogin.password,selectRemberPass:!0},o.setObject("loginAccount",u)):(u={phone:e.userLogin.phone,password:"",selectRemberPass:!1},o.setObject("loginAccount",u)),g(),r.next=26;break;case 21:r.prev=21,r.t0=r.catch(2),console.log(r.t0),e.loginError=r.t0.info,e.$apply(function(){e.whetherWrong=!0});case 26:r.next=29;break;case 28:s.showShortCenter("请输入用户名或密码");case 29:case"end":return r.stop()}},r,d,[[2,21]])})),document.addEventListener("jpush.setTags",c.onTagsWithAlias,!1),e.forgetPassword=function(){e.isForget=!0},e.sendVerifyCode=_asyncToGenerator(regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={phone:e.forgetParams.phone},r.prev=1,r.next=4,t.sendTo(url+"/auth/sendCode","",{params:a});case 4:o=r.sent,console.log(o),s.showShortCenter("已发送验证码,请稍等"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),r.t0.info?s.showShortCenter(r.t0.info):s.showShortCenter(r.t0);case 12:case"end":return r.stop()}},r,d,[[1,9]])})),e.confirmResetLoginPass=_asyncToGenerator(regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.forgetParams.resetPassword1===e.forgetParams.resetPassword2){r.next=3;break}return s.showShortCenter("两次输入的密码不一致,请重新输入"),r.abrupt("return");case 3:return a={verificationCode:e.forgetParams.verifyCode,passWord:e.forgetParams.resetPassword2,phone:e.forgetParams.phone},r.prev=4,r.next=7,t.sendTo(url+"/auth/forgotPassword","",{params:a});case 7:o=r.sent,console.log(o),e.$apply(function(){s.showShortCenter("重置密码成功"),e.isForget=!1}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(4),r.t0.info?s.showShortCenter(r.t0.info):s.showShortCenter(r.t0);case 15:case"end":return r.stop()}},r,d,[[4,12]])})),e.closeForgetModal=function(){e.isForget=!1}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.registerCtrl",[]).controller("registerCtrl",["$scope","$ionicActionSheet","$cordovaToast","$ionicLoading","singlePicMethods","$ionicModal","Ajax","$state",function(e,t,r,a,o,n,s,i){var c=this;e.verifyData={account:"",phone:"",password:"",payPassword:"",verifyCode:""},e.shopImgSrc="";var l="";function u(t,o){"0"===t.error?(l=t.data,e.shopImgSrc=o,console.log(l),console.log(e.shopImgSrc),a.hide()):r.showShortCenter(t.info)}e.showAction=function(){var e=t.show({buttons:[{text:"拍照"},{text:"从相册选择"}],titleText:"请选择",cancelText:"取消",cancel:function(){return!0},buttonClicked:function(t){0===t?o.takePhoto(u):1===t&&o.pickImage(u),e()}})},e.showLargeUploadImg=function(t){e.uploadImgSrc=t,e.modalPic.show()},e.sendVerifyCode=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={phone:e.verifyData.phone},t.prev=1,t.next=4,s.sendTo(url+"/auth/sendCodeForReview","",{params:a});case 4:t.sent,r.showShortCenter("已发送验证码,请稍等"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.info?r.showShortCenter(t.t0.info):r.showShortCenter(t.t0);case 11:case"end":return t.stop()}},t,c,[[1,8]])})),e.submitVerify=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!l){t.next=11;break}return a={account:e.verifyData.account,password:e.verifyData.password,phone:e.verifyData.phone,payPassword:e.verifyData.payPassword,shopImg:l,verificationCode:e.verifyData.verifyCode},t.next=5,s.sendTo(url+"/auth/applyReview","",{params:a});case 5:o=t.sent,console.log(o),r.showShortCenter("发起审核成功"),i.go("login"),t.next=12;break;case 11:alert("请上传彩店凭证照片");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0.info?r.showShortCenter(t.t0.info):r.showShortCenter(t.t0);case 17:case"end":return t.stop()}},t,c,[[0,14]])})),n.fromTemplateUrl("common/template/largeImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalPic=t})}]),angular.module("starter.mineCtrl",["mine.services"]).controller("mineCtrl",["$scope","$rootScope","mineIndexService","$state","$stateParams",function(e,t,r,a,o){t.nowModule={index:5},e.iSelectActiveTab=r.feature,o.editAccount&&(e.iSelectActiveTab=2),e.activeTab=function(t){0===t?(e.iSelectActiveTab=0,a.go("modules.mine.shopSets")):1===t?(e.iSelectActiveTab=1,a.go("modules.mine.shopAccount")):2===t&&(e.iSelectActiveTab=2,a.go("modules.mine.accountSets"))}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("mine.services",[]).service("singlePicMethods",["locals","$rootScope","$cordovaCamera","$cordovaImagePicker","$cordovaFileTransfer","$ionicLoading","$cordovaToast",function(e,t,r,a,o,n,s){function i(t,r,a){var s={fileKey:"filedata",fileName:t.split("/").pop(),mimeType:"image/jpg",headers:{"Auth-Token":e.get("token")}},i=url+"/home/uploadImg";n.show({template:'<p class="spinner-icon"><ion-spinner icon="bubbles" class="spinner-balanced"></ion-spinner><span>上传中...'}),o.upload(i,t,s).then(function(e){var o=JSON.parse(e.response);console.log(o),r(o,t,a)},function(e){alert("部分图片上传失败"+e.exception),console.log(e),n.hide()},function(e){})}this.takePhoto=function(e,t){var a={quality:100,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,mediaType:0,cameraDirection:0,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0};r.getPicture(a).then(function(r){i(r,e,t)},function(e){s.showShortCenter(e)})},this.pickImage=function(e,t){a.getPictures({maximumImagesCount:1,quality:100}).then(function(r){var a=!0,o=!1,n=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)i(s.value,e,t)}catch(e){o=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw n}}},function(e){s.showShortCenter(e)})},this.downloadFile=function(e,r,a){var n=e.split("/").pop(),i=cordova.file.externalRootDirectory+n;console.log(e),o.download(e,i,{},!0).then(function(e){t.$broadcast(r,e.nativeURL,a)},function(e){s.showShortCenter("获取图片失败,请重试"+e)},function(e){})}}]).factory("mineIndexService",["Ajax","locals","$rootScope",function(e,t,r){return{feature:0}}]).factory("mineShopSetsService",["Ajax","locals","$rootScope","$cordovaToast",function(e,t,r,a){return{feature:0,featureChoose:function(e){return"betters"===e?bettersView:"assist"===e?assistView:void 0},AjaxUpdateShopInformation:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n,s){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/ownSetUp/updateShopInformation",t.get("token"),{params:n});case 3:return i=o.sent,console.log(i),r.$broadcast("mineOperationsSuc",s),o.abrupt("return",i);case 9:o.prev=9,o.t0=o.catch(0),console.log(o.t0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0.error);case 13:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e,t){return o.apply(this,arguments)}}(),AjaxEditSaleTime:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n,s){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/ownSetUp/updateBusinessTime",t.get("token"),{params:n});case 3:return i=o.sent,console.log(i),r.$broadcast("mineOperationsSuc",s),o.abrupt("return",i);case 9:o.prev=9,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0.error);case 12:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e,t){return o.apply(this,arguments)}}()}}]).factory("mineShopAccountService",["locals",function(e){return{allStatus:["充值","委托扣费"],addStatusChina:function(e){var t=!0,r=!1,a=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var s=o.value;s.statusChina=1===s.status?"充值":"委托扣费"}}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}return e}}}]).factory("mineAccountService",["Ajax","locals","$rootScope","$cordovaToast",function(e,t,r,a){var o={h1:"修改登录密码",text1:"登录密码",text2:"确认登录密码"},n={h1:"修改操作密码",text1:"操作密码",text2:"确认操作密码"};return{getFeature:function(e){return"login"===e?o:n},AjaxEditAccount:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n){var s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/ownSetUp/updateAccount",t.get("token"),{params:n});case 3:return s=o.sent,console.log(s),r.$broadcast("editAccountSuc"),o.abrupt("return",s);case 9:o.prev=9,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0.error);case 12:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e){return o.apply(this,arguments)}}(),AjaxEditPassword:function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(n){var s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.sendTo(url+"/ownSetUp/updatePassword",t.get("token"),{params:n});case 3:return s=o.sent,console.log(s),r.$broadcast("editPasswordSuc"),o.abrupt("return",s);case 9:o.prev=9,o.t0=o.catch(0),o.t0.info?a.showShortCenter(o.t0.info):a.showShortCenter(o.t0.error);case 12:case"end":return o.stop()}},o,this,[[0,9]])}));return function(e){return o.apply(this,arguments)}}()}}]),angular.module("starter.mineShopSetsCtrl",["mine.services"]).controller("mineShopSetsCtrl",["$scope","$rootScope","mineIndexService","mineShopSetsService","$ionicModal","$ionicActionSheet","singlePicMethods","$ionicLoading","locals","addBefore","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l,u){var h=c.getObject("shopPerformance");e.shopSetsView=h.RequestShopInformation,console.log(e.shopSetsView),e.shopImgSrc=t.shopImgSrc||"./common/img/noShopImg.svg";var d={shopImg:t.shopImgSrc,qq:e.shopSetsView.qqTouchQRCode,qqMoney:e.shopSetsView.qqQRCode,wechat:e.shopSetsView.wechatTouchQRCode,wechatMoney:e.shopSetsView.weChatQRCode,alipay:e.shopSetsView.alipayTouchQRCode,alipayMoney:e.shopSetsView.alipayQRCode},p=d;e.imgUrlTotal={shopImg:t.shopImgSrc||"./common/img/noShopImg.svg",qq:"",qqMoney:"",wechat:"",wechatMoney:"",alipay:"",alipayMoney:""};var g=new Date,m=!0;1===e.shopSetsView.status?m=!0:2===e.shopSetsView.status&&(m=!1),e.operations={description:e.shopSetsView.description,name:e.shopSetsView.name,address:e.shopSetsView.address,number:e.shopSetsView.number,phone:e.shopSetsView.phone,qq:e.shopSetsView.qq,wechat:e.shopSetsView.wechat,alipay:e.shopSetsView.alipay,bankCard:e.shopSetsView.bankCard,whetherOnSale:!e.shopSetsView.status,whetherOnDelegate:m,startTime:new Date(g.getFullYear(),g.getMonth(),g.getDate(),e.shopSetsView.startTime.split(":")[0],e.shopSetsView.startTime.split(":")[1]),endTime:new Date(g.getFullYear(),g.getMonth(),g.getDate(),e.shopSetsView.endTime.split(":")[0],e.shopSetsView.endTime.split(":")[1]),password:""},e.openEditIntroModal=function(){e.operations.password="",e.editIntroModal.show()},e.confirmEditIntro=function(){var t={description:e.operations.description,name:e.operations.name,number:e.operations.number,address:e.operations.address,shopImg:p.shopImg,ManagePassword:e.operations.password};a.AjaxUpdateShopInformation(t,"editIntroModal")};function f(t,r,a){"0"===t.error?(p[a]=t.data,e.imgUrlTotal[a]=r,console.log(p),console.log(e.imgUrlTotal),i.hide()):u.showShortCenter(t.info)}e.showAction=function(){var e=n.show({buttons:[{text:"拍照"},{text:"从相册选择"}],titleText:"请选择",cancelText:"取消",cancel:function(){return!0},buttonClicked:function(t){0===t?s.takePhoto(f,"shopImg"):1===t&&s.pickImage(f,"shopImg"),e()}})},e.showLargeUploadImg=function(t){e.uploadImgSrc=t,e.modalQr.show()},e.closeEditIntroModal=function(){e.editIntroModal.hide()},e.openContactWaysModal=function(){e.operations.password="",e.contactWaysModal.show()},e.uploadQr=function(e){s.pickImage(f,e)},e.showLargeQr=function(t){console.log(t),t&&(e.modalQrcode.show(),e.uploadImgSrc=t)},e.confirmContactWays=function(){if(11===e.operations.phone.length||0===e.operations.phone.length){console.log(e.operations),console.log(p);var t={phone:e.operations.phone,qq:e.operations.qq,qqTouchQRCode:p.qq,weChat:e.operations.wechat,wechatTouchQRCode:p.wechat,alipay:e.operations.alipay,alipayTouchQRCode:p.alipay,ManagePassword:e.operations.password};a.AjaxUpdateShopInformation(t,"contactWaysModal")}else u.showShortCenter("请填写11位正确手机号码")},e.closeContactWaysModal=function(){e.operations.password="",e.contactWaysModal.hide()},e.openOnSaleTimeModal=function(){e.operations.password="",e.onSaleTimeModal.show()},e.confirmChooseSaling=function(){var t=0;console.log(e.operations.whetherOnSale),e.operations.whetherOnSale?t=0:!e.operations.whetherOnSale&&e.operations.whetherOnDelegate?t=1:e.operations.whetherOnSale||e.operations.whetherOnDelegate||(t=2);var r={status:t,ManagePassword:e.operations.password};a.AjaxUpdateShopInformation(r,"onSaleTimeModal").then(function(){e.$emit("editOnSaleStatusSuc")})},e.closeOnSaleTimeModal=function(){e.operations.whetherOnSale=!e.shopSetsView.status,e.onSaleTimeModal.hide()},e.openEditSaleTimeModal=function(){e.operations.password="",e.editSaleTimeModal.show()},e.confirmEditSaleTime=function(){var t={startTime:l.addHour0(e.operations.startTime),endTime:l.addHour0(e.operations.endTime),ManagePassword:e.operations.password};a.AjaxUpdateShopInformation(t,"editSaleTimeModal")},e.closeEditSaleTimeModal=function(){e.editSaleTimeModal.hide()},e.openMoneyWaysModal=function(){e.operations.password="",e.moneyWaysModal.show()},e.confirmMoneyWays=function(){console.log(p);var t={bankCard:e.operations.bankCard,ManagePassword:e.operations.password,qqQRCode:p.qqMoney,weChatQRCode:p.wechatMoney,alipayQRCode:p.alipayMoney};a.AjaxUpdateShopInformation(t,"moneyWaysModal")},e.closeMoneyWaysModal=function(){e.moneyWaysModal.hide()},e.$on("mineOperationsSuc",function(r,a){console.log(e.imgUrlTotal),console.log(p),"editIntroModal"===a?(e.shopImgSrc=t.shopImgSrc=e.imgUrlTotal.shopImg,e.shopSetsView.description=e.operations.description,e.shopSetsView.name=e.operations.name,e.shopSetsView.number=e.operations.number,e.shopSetsView.address=e.operations.address):"contactWaysModal"===a?(e.shopSetsView.phone=e.operations.phone,e.shopSetsView.qq=e.operations.qq,e.shopSetsView.qqTouchQRCode=p.qq,e.shopSetsView.wechat=e.operations.wechat,e.shopSetsView.wechatTouchQRCode=p.wechat,e.shopSetsView.alipay=e.operations.alipay,e.shopSetsView.alipayTouchQRCode=p.alipay):"onSaleTimeModal"===a?e.shopSetsView.status=e.operations.whetherOnSale?0:1:"editSaleTimeModal"===a?(e.shopSetsView.startTime=l.addHour0(e.operations.startTime),e.shopSetsView.endTime=l.addHour0(e.operations.endTime)):"moneyWaysModal"===a&&(e.shopSetsView.qqQRCode=p.qqMoney,e.shopSetsView.wechatQRCode=p.wechatMoney,e.shopSetsView.alipayQRCode=p.alipayMoney,e.shopSetsView.bankCard=e.operations.bankCard),c.setObject("shopPerformance",h),console.log(c.getObject("shopPerformance")),p=d,e[a].hide()}),e.closeLargeImgModal=function(){e.modalQr.hide()},o.fromTemplateUrl("editIntroModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.editIntroModal=t}),o.fromTemplateUrl("contactWaysModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.contactWaysModal=t}),o.fromTemplateUrl("onSaleTimeModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.onSaleTimeModal=t}),o.fromTemplateUrl("./common/template/editSaleTimeModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.editSaleTimeModal=t}),o.fromTemplateUrl("moneyWaysModal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.moneyWaysModal=t}),o.fromTemplateUrl("common/template/largeImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalQr=t}),o.fromTemplateUrl("common/template/qrImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalQrcode=t}),e.$on("modal.hidden",function(){e.uploadImgSrc=""})}]);function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.mineTwoSetsCtrl",["mine.services"]).controller("mineShopAccountCtrl",["$scope","$rootScope","mineShopAccountService","$state","Ajax","locals","dateCheck",function(e,t,r,a,o,n,s){e.showLastPic=!1;var i=new Date;e.search={startDate:new Date(i.getFullYear(),i.getMonth(),i.getDate()-179),endDate:new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours()+1)};var c=n.getObject("shopPerformance");e.shopSetsView=c.RequestShopInformation,e.allShopAccountData=[],e.allStatus=r.allStatus;var l=e.moreShopAccount={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==l.moredata||!1!==l.alter){t.next=10;break}return a=l.params,t.next=5,o.sendTo(url+"/bill/getShopBillList",n.get("token"),{params:a});case 5:s=t.sent,console.log(s),s.data.length===l.params.pageSize?(e.allShopAccountData=l.eachOrder=l.eachOrder.concat(s.data),e.allShopAccountData=r.addStatusChina(e.allShopAccountData),l.params.pageNumber+=1):0!==s.data.length&&s.data.length<=l.params.pageSize?(e.allShopAccountData=l.eachOrder=l.eachOrder.concat(s.data),e.allShopAccountData=r.addStatusChina(e.allShopAccountData),e.showLastPic=!0,l.moredata=!1):0===s.data.length&&(e.showLastPic=!0,l.moredata=!1),l.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),t.t0.info?$cordovaToast.showShortCenter(t.t0.info):$cordovaToast.showShortCenter(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()};e.searchDetail=function(){s.whetherInMonth(e.search.startDate,179)&&(l.params={pageNumber:1,pageSize:15,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},e.showLastPic=!1,l.moredata=!0,l.alter=!1,l.eachOrder.length=0,e.allShopAccountData.length=0,l.loadMore(),l.alter=!0)},e.whetherInMonth=function(){s.whetherInMonth(e.search.startDate,179)},e.filterStatus=function(t){l.params={pageNumber:1,pageSize:15,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),status:"充值"===t?1:2},l.moredata=!0,l.alter=!1,l.eachOrder.length=0,e.allShopAccountData.length=0,l.loadMore(),l.alter=!0}}]).controller("mineAccountSetsCtrl",["$scope","$ionicModal","mineIndexService","mineAccountService","locals","Ajax","$cordovaToast","$state",function(e,t,r,a,o,n,s,i){var c=this;e.operations={password:"",realName:"",phone:"",editPassword1:"",editPassword2:"",verifyCode:"",verifyCode2:""},e.userInfo=o.getObject("userInfo"),console.log(e.userInfo),e.openAccountNameModal=function(){e.operations.password="",e.operations.phone="",e.operations.realName="",e.editAccountNameModal.show()},e.confirmEditAccount=function(){var t={payPassword:e.operations.password,realName:e.operations.realName,phone:e.operations.phone,verificationCode:e.operations.verifyCode};a.AjaxEditAccount(t)},e.$on("editAccountSuc",function(){s.showShortCenter("修改成功"),e.editAccountNameModal.hide(),e.operations.phone&&(e.userInfo.phone=e.operations.phone),e.operations.realName&&(e.userInfo.realName=e.operations.realName),o.setObject("userInfo",e.userInfo),e.$emit("editRealNameSuc")}),e.openEditPasswordModal=function(t){e.nowEditPass=t,e.oView=a.getFeature(t),e.operations.verifyCode2="",e.operations.editPassword1="",e.operations.editPassword2="",e.editPasswordModal.show()},e.checkWhetherSame=function(){e.operations.editPassword1!==e.operations.editPassword2&&s.showShortCenter("两次输入的密码不一致,请重新输入")},e.confirmEditPassword=function(){var t;if(e.operations.editPassword1===e.operations.editPassword2){var r=(t={},_defineProperty(t,"login"===e.nowEditPass?"password":"payPassword",e.operations.editPassword2),_defineProperty(t,"verificationCode",e.operations.verifyCode2),t);a.AjaxEditPassword(r)}else s.showShortCenter("两次输入的密码不一致,请重新输入")},e.$on("editPasswordSuc",function(){s.showShortCenter("修改密码成功"),e.editPasswordModal.hide(),e.operations.editPassword2=e.operations.editPassword1=""}),e.sendVerifyCode=_asyncToGenerator(regeneratorRuntime.mark(function t(){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={phone:e.operations.phone},t.prev=1,t.next=4,n.sendTo(url+"/ownSetUp/sendCode",o.get("token"),{params:r});case 4:a=t.sent,console.log(a),s.showShortCenter.showShortCenter("已发送验证码,请稍等").then(function(){},function(e){s.showShortCenter(e)}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.info?s.showShortCenter(t.t0.info):s.showShortCenter(t.t0);case 12:case"end":return t.stop()}},t,c,[[1,9]])})),e.exitLogin=function(){var t={phone:o.getObject("loginAccount").phone,password:"",selectRemberPass:!1};window.JPush.cleanTags({sequence:1},function(e){e.sequence,console.log(e)},function(e){e.sequence,e.code,console.log(e)}),e.$emit("exitLogin"),o.setObject("loginAccount",t),i.go("login",{fromWhich:"fromExitLogin"})},t.fromTemplateUrl("editAccountNameModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.editAccountNameModal=t}),t.fromTemplateUrl("editOperationPassword.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.editPasswordModal=t})}]),angular.module("starter.modulesCtrl",[]).controller("modulesCtrl",["$scope","$rootScope","locals","Ajax","PicMethods","$state","walletIndexService","modulesService",function(e,t,r,a,o,n,s,i){t.isShowInstMessage=!1,r.set("iSelectActiveTab","0"),t.whetherHadChangeAccount?t.receiveMessages=[]:t.receiveMessages=r.getObject("receiveMessage").arr?r.getObject("receiveMessage").arr:[],e.accountHeadImg=r.getObject("userInfo").headImg,e.account=r.getObject("userInfo").account,e.whetherOwner=1===r.getObject("userInfo").type;var c=r.getObject("shopPerformance");t.shopImgSrc=c.RequestShopInformation.headImg,e.whetherOpen=0===c.RequestShopInformation.status?"营业中":"暂停营业中",console.log(window.xunfeiListenSpeaking),e.rightsList=r.getObject("userRights"),e.voiceStatus=!0;var l=function(e){try{var t=void 0;"Android"==device.platform?(window.plugins.jPushPlugin.openNotification.alert,t=window.plugins.jPushPlugin.receiveNotification.title):(e.aps.alert,t=e.aps.title),i.chooseWhichToGo(t)}catch(e){alert("JPushPlugin:onOpenNotification"+e)}},u=function(a){try{console.log(a);var o=void 0,n=void 0;"Android"==device.platform?(n=window.plugins.jPushPlugin.receiveNotification.alert,o=window.plugins.jPushPlugin.receiveNotification.title):(n=a.aps.alert,o=a.aps.title);var s=n.split("。"),c={title:o,content:s[0],time:s[1].split("*")[1]?s[1].split("*")[0].split(",")[0]:s[1]};t.$apply(function(){t.receiveMessages.unshift(c)}),console.log(e.voiceStatus),i.broadcastAudio(o,n,e.voiceStatus),r.setObject("receiveMessage",{arr:t.receiveMessages})}catch(e){}};document.addEventListener("jpush.openNotification",l,!1),document.addEventListener("jpush.receiveNotification",u,!1),e.$on("exitLogin",function(){document.removeEventListener("jpush.openNotification",l,!1),document.removeEventListener("jpush.receiveNotification",u,!1),alert("解绑成功")}),t.showInstMessages=function(){0!==t.receiveMessages.length&&(t.isShowInstMessage=!t.isShowInstMessage)},e.toDetailFromInst=function(e){i.chooseWhichToGo(t.receiveMessages[e].title),t.receiveMessages.splice(e,1),r.setObject("receiveMessage",{arr:t.receiveMessages}),t.isShowInstMessage=!1},t.ignoreThis=function(e,a){a.stopPropagation(),t.receiveMessages.splice(e,1),r.setObject("receiveMessage",{arr:t.receiveMessages}),0===t.receiveMessages.length&&(t.isShowInstMessage=!1)},t.clearAllMessage=function(){t.receiveMessages.length=0,r.getObject("receiveMessage").arr.length=0,t.isShowInstMessage=!1},e.$on("editOnSaleStatusSuc",function(){console.log(r.getObject("shopPerformance")),e.$apply(function(){e.whetherOpen=0===r.getObject("shopPerformance").RequestShopInformation.status?"营业中":"暂停营业中"})}),e.goClientAssist=function(){n.go("modules.clients",{fromHome:"fromHome"})}}]),angular.module("modules.services",[]).factory("modulesService",["$rootScope","$state","locals","walletIndexService",function(e,t,r,a){return{broadcastAudio:function(t,a,o){console.log(t),console.log(a);var n="",s="状态更新"!==t?a.split("+")[1]:"";if(console.log(t),"状态更新"===t){var i=r.getObject("shopPerformance");i.RequestShopInformation.status=0,r.setObject("shopPerformance",i),e.$broadcast("editOnSaleStatusSuc")}else"大乐透出票申请"===t?(o&&(n="您有新的大乐透订单,请及时出票",window.xunfeiListenSpeaking.startSpeak(function(){console.log("成功")},function(){console.log("失败")},n)),e.$broadcast("haveBigLotteryOutputApply",s)):"竞彩出票申请"===t?(o&&(n="您有新的足彩订单,请及时出票",window.xunfeiListenSpeaking.startSpeak(function(){console.log("成功")},function(){console.log("失败")},n)),e.$broadcast("haveFootballOutputApply",s)):"充值申请"===t?(o&&(n="您有新的充值申请,请及时处理",window.xunfeiListenSpeaking.startSpeak(function(){console.log("成功")},function(){console.log("失败")},n)),e.$broadcast("haveChargeApply",s)):"提现申请"===t?(o&&(n="您有新的提现申请,请及时处理",window.xunfeiListenSpeaking.startSpeak(function(){console.log("成功")},function(){console.log("失败")},n)),e.$broadcast("haveWithdrawApply",s)):"及时出票"===t&&(n="您有新订单即将截止投注,请及时处理",window.xunfeiListenSpeaking.startSpeak(function(){console.log("成功")},function(){console.log("失败")},n))},chooseWhichToGo:function(e){switch(e){case"竞彩出票申请":r.set("iSelectActiveTab","1"),t.go("modules.orders.bigLotteOrders");break;case"大乐透出票申请":r.set("iSelectActiveTab","0"),t.go("modules.orders.bigLotteOrders");break;case"派奖申请":t.go("modules.wallet.bigLotteOrders",{whetherOutput:r.set("whetherOutput",!1)});break;case"充值申请":a.feature="charge",t.go("modules.wallet.charge");break;case"提现申请":a.feature="withdraw",t.go("modules.wallet.charge");break;case"拒绝提现申请":case"同意提现申请":a.feature="withdraw",t.go("modules.wallet.charge.records",{type:"withdraw"});break;default:t.go("modules.home.index")}}}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.allOrders",["order.services"]).controller("allOrdersCtrl",["$scope","$rootScope","Ajax","orderService","splitCode","$ionicModal","locals","PicMethods","dateCheck","$cordovaToast","$stateParams",function(e,t,r,a,o,n,s,i,c,l,u){e.allStatus=["委托","待出票","已出票","待派奖","已派奖","未中奖"],e.allLotteryID=["超级大乐透","竞彩足球"],e.checkboxSelected={whether:!1},e.showLastPic=!1,e.imageList=[],e.allOrders=[];var h=new Date;e.search={startDate:new Date(h.getFullYear(),h.getMonth(),h.getDate()-179),endDate:new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()+1),phone:null,customerName:null};var d=e.moreOrders={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:15,entrust:"",phone:u.whetherPhone,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==d.moredata||!1!==d.alter){t.next=10;break}return o=d.params,t.next=5,r.sendTo(url+"/order/getList",s.get("token"),{params:o});case 5:n=t.sent,console.log(n),n.data.length===d.params.pageSize?(e.allOrders=d.eachOrder=d.eachOrder.concat(n.data),e.allOrders=a.addStatusAndType(e.allOrders,2),d.params.pageNumber+=1):0!==n.data.length&&n.data.length<=d.params.pageSize?(e.allOrders=d.eachOrder=d.eachOrder.concat(n.data),e.allOrders=a.addStatusAndType(e.allOrders,2),d.moredata=!1,e.showLastPic=!0):0===n.data.length&&(d.moredata=!1,e.showLastPic=!0),d.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),t.t0.info?l.showShortCenter(t.t0.info):l.showShortCenter(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()};e.searchAllOrders=function(){console.info(61656),c.whetherInMonth(e.search.startDate,179)&&(d.params={pageNumber:1,pageSize:15,phone:e.search.phone,allBall:"",entrust:"",customerName:e.search.customerName,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},e.showLastPic=!1,e.allOrders.length=0,d.eachOrder.length=0,d.moredata=!0,d.loadMore(),d.alter=!0)},e.showDetail=function(t){e.eachOrder=e.allOrders[t],console.log(e.eachOrder),e.checkboxSelected.whether=!1;var r={id:e.eachOrder.id};"竞彩足球"===e.eachOrder.lotteryType?a.AjaxGetFootballOrderDetail(r).then(function(t){console.log(t),t&&(e.oFootballOrders=t,e.orderInfo=e.eachOrder,e.footballModal.show())}):"超级大乐透"!==e.eachOrder.lotteryType||1!==e.eachOrder.status&&2!==e.eachOrder.status&&3!==e.eachOrder.status?"超级大乐透"===e.eachOrder.lotteryType&&4===e.eachOrder.status&&(e.orderInfo=e.eachOrder,e.modalSendDetailModal.show()):e.modalOrderDetail.show()},e.showFootballOutputDetail=function(){4===e.eachOrder.status?(e.footballModal.hide(),e.modalSendDetailModal.show()):1!==e.eachOrder.status&&2!==e.eachOrder.status&&3!==e.eachOrder.status||(e.footballModal.hide(),e.modalOrderDetail.show())},e.filterStatus=function(t){switch(e.showLastPic=!1,t){case"委托":p("","",1);break;case"待出票":p(1);break;case"已出票":p(2);break;case"待派奖":p(4,0);break;case"已派奖":p(4,1);break;case"未中奖":p(3)}},e.filterLotteryID=function(t){switch(e.showLastPic=!1,console.log(t),t){case"超级大乐透":g("2");break;case"竞彩足球":g("",0)}};var p=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.log(t,r,a),t===d.params.status&&r===d.params.isReturn||(e.allOrders.length=0,d.eachOrder.length=0,d.params.status=t,d.params.pageNumber=1,d.params.isReturn=r,d.params.entrust=a,d.moredata=!0,d.loadMore(),d.alter=!0)},g=function(t,r){e.allOrders.length=0,d.eachOrder.length=0,d.params.lotteryID=t,d.params.allBall=r,d.params.pageNumber=1,d.moredata=!0,d.loadMore(),d.alter=!0};e.whetherInMonth=function(){c.whetherInMonth(e.search.startDate,179)},e.checkUploadImg=function(t){if(e.checkboxSelected.whether=!e.checkboxSelected.whether,!0===e.checkboxSelected.whether&&e.eachOrder[t]){e.imageList.length=0;var r=!0,a=!1,o=void 0;try{for(var n,s=e.eachOrder[t].split(",")[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var c=n.value;i.downloadFile(c,"downloadOrderImgSucceed")}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}},e.$on("downloadOrderImgSucceed",function(t,r){e.imageList.push(r)}),e.showLargeUploadImg=function(t){e.uploadImgSrc=t,e.modalAllOrder.show()},e.showOrderDetail=function(){e.modalOrderDetail.show()},n.fromTemplateUrl("orders/template/orderDetailModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalOrderDetail=t}),n.fromTemplateUrl("orders/template/footballModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.footballModal=t}),n.fromTemplateUrl("orders/template/orderDetailSendModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalSendDetailModal=t}),n.fromTemplateUrl("./common/template/largeImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalAllOrder=t})}]);var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.bigLotteOrders",["order.services"]).controller("bigLotteOrdersCtrl",["$scope","$rootScope","Ajax","$ionicModal","splitCode","locals","$ionicActionSheet","PicMethods","$ionicLoading","orderService","$state","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l,u,h){var d=this;e.whetherOutput=n.get("whetherOutput")||!0,e.iSelectActiveTab=1*n.get("iSelectActiveTab"),e.whetherFromQuickOutput=!1,e.allNeedDo=[],e.imageList=[],e.checkboxSelected={whether:!1},e.delegatePassword={password:""},e.isCheckMore=!1,e.delegateStatus="委托",e.returnParams={payPassword:"",returnMoney:void 0};var p=[[],n.get("token"),n.getObject("userRights")],g=p[0],m=p[1],f=p[2],w=[n.get("bFromHomeSendPrize"),!1,0],v=w[0],S=w[1],C=w[2],y=function(t,r,a){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allBall;l.AjaxNeedOutput(t,r,o,a).then(function(t){e.$apply(function(){e.allNeedDo=t.reverse()})})},b=function(t,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],n=_slicedToArray(o,1)[0];l.AjaxNeedSend(t,r,a,n).then(function(t){e.$apply(function(){e.allNeedDo=t})})},D=function(t,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=o.allBall,s=o.orderInfoID,i=o.haveCloseLoading;console.log(s),l.AjaxNeedOutput(t,r,n,a,s,i).then(function(t){console.log(t),e.$apply(function(){e.allNeedDo.push(t[0])}),console.log(e.allNeedDo);var r=!0,a=!1,o=void 0;try{for(var n,s=e.allNeedDo.entries()[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i=n.value,c=_slicedToArray(i,2),l=c[0];c[1].index=e.allNeedDo.length-l-1}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}})};"1"===v?(e.whetherOutput=!1,v="0",b("2",4,0)):"0"===v&&0===e.iSelectActiveTab?(e.whetherOutput=!0,y("2",1,e.iSelectActiveTab)):"0"===v&&1===e.iSelectActiveTab&&(e.whetherOutput=!0,y("",1,e.iSelectActiveTab,{allBall:0})),e.showBetTicket=function(t){if(e.whetherFromQuickOutput=!1,S=d.index===t,console.log(d),console.log(e.allNeedDo[t]),0===e.iSelectActiveTab){e.nowOutputOrderInfo=e.allNeedDo[t],e.nowOutputOrder=e.allNeedDo[t].lotteryList;for(var r=0,a=0;a<e.nowOutputOrder.length;a++)r+=e.nowOutputOrder[a].betAmount,e.nowOutputOrder[a].nums=o.split(e.nowOutputOrder[a].investCode);e.nowTotalBetsAmount=r,e.modalBetTicket.show()}else if(1===e.iSelectActiveTab){e.nowOutputOrderInfo=e.allNeedDo[t];var n={id:e.allNeedDo[t].id};l.AjaxGetFootballOrderDetail(n).then(function(t){t&&(e.oFootballOrders=t,e.footballModal.show())})}d.index=t},e.showOutputDetail=function(){S||(e.imageList.length=0,g.length=0),e.checkboxSelected.whether=!1,e.modalBetTicket.hide(),e.eachOrder=e.nowOutputOrderInfo,e.modalBetTicketDetail.show()};function x(t,r,a){"0"===t.error?(g.push(t.data),e.imageList.push(r),console.log(g),a&&c.hide()):h.showShortCenter(t.info),e.imageList.length>3&&h.showShortCenter("最多上传3张凭证图片,请删除多余图片")}e.showAction=function(){if(e.imageList.length<3)var t=s.show({buttons:[{text:"拍照"},{text:"从相册选择"}],titleText:"请选择",cancelText:"取消",cancel:function(){return!0},buttonClicked:function(r){0===r?i.takePhoto(x,e.imageList.length):1===r&&i.pickImage(x,e.imageList.length),t()}});else h.showShortCenter("最多上传3张凭证图片")},e.showLargeUploadImg=function(t){e.uploadImgSrc=t,e.modalQr.show()},e.deleteUploadImg=function(t){g.splice(t,1),e.imageList.splice(t,1),console.log(g)},e.checkMore=function(){e.eachInvestCodesBall=e.eachOrder.investCode,e.isCheckMore=!0},e.closeCheckMore=function(){e.isCheckMore=!1},e.$on("modal.hidden",function(){e.isCheckMore=!1}),e.completeOutput=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,s,i,c,u,p,w,v,S,C,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!1!==f.printTicket.check){t.next=4;break}return h.showShortCenter("您没有出票的权限"),t.abrupt("return");case 4:return a={id:e.eachOrder.id,printImg:g.join(",")},t.next=7,r.sendTo(url+"/order/print",m,{params:a});case 7:if(t.sent,e.imageList.length=0,g.length=0,e.checkboxSelected.whether=!1,console.log(e.allNeedDo),console.log(e.allNeedDo.length),console.log(e.eachOrder.index),e.allNeedDo.splice(e.allNeedDo.length-e.eachOrder.index-1,1),e.whetherFromQuickOutput&&0===e.iSelectActiveTab&&e.allNeedDo[0]){for(e.modalBetTicketDetail.hide(),e.eachOrder=e.allNeedDo[0],e.nowOutputOrderInfo=e.allNeedDo[0],e.nowOutputOrder=e.allNeedDo[0].lotteryList,n=0,s=0;s<e.nowOutputOrder.length;s++)n+=e.nowOutputOrder[s].betAmount,e.nowOutputOrder[s].nums=o.split(e.nowOutputOrder[s].investCode);e.nowTotalBetsAmount=n,e.modalBetTicket.show(),console.log(e.allNeedDo)}else e.whetherFromQuickOutput&&1===e.iSelectActiveTab&&e.allNeedDo[0]?(e.modalBetTicketDetail.hide(),e.eachOrder=e.allNeedDo[0],e.modalBetTicketDetail.hide(),i={id:e.eachOrder.id},l.AjaxGetFootballOrderDetail(i).then(function(t){t&&(e.nowOutputOrderInfo=e.allNeedDo[0],e.oFootballOrders=t,e.footballModal.show())}),console.log(e.allNeedDo)):(console.log("出票成功"),e.modalBetTicketDetail.hide());for(c=!0,u=!1,p=void 0,t.prev=19,w=e.allNeedDo.entries()[Symbol.iterator]();!(c=(v=w.next()).done);c=!0)S=v.value,C=_slicedToArray(S,2),y=C[0],C[1].index=e.allNeedDo.length-y-1;t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),u=!0,p=t.t0;case 27:t.prev=27,t.prev=28,!c&&w.return&&w.return();case 30:if(t.prev=30,!u){t.next=33;break}throw p;case 33:return t.finish(30);case 34:return t.finish(27);case 35:e.$emit("outputSuc",e.iSelectActiveTab),t.next=41;break;case 38:t.prev=38,t.t1=t.catch(0),t.t1.info?h.showShortCenter(t.t1.info):h.showShortCenter(t.t1);case 41:case 42:case"end":return t.stop()}},t,d,[[0,38],[19,23,27,35],[28,,30,34]])})),e.$on("changeActiveTab",function(t,r){e.iSelectActiveTab=r,e.imageList.length=0,g.length=0,e.checkboxSelected.whether=!1,console.log(e.iSelectActiveTab),0===e.iSelectActiveTab?(e.whetherOutput=!0,y("2",1,e.iSelectActiveTab)):1===e.iSelectActiveTab&&(e.whetherOutput=!0,y("",1,e.iSelectActiveTab,{allBall:0}))}),e.showFootballOutputDetail=function(){S||(e.imageList.length=0,g.length=0),e.checkboxSelected.whether=!1,e.footballModal.hide(),e.eachOrder=e.nowOutputOrderInfo,e.modalBetTicketDetail.show()},e.showOutput=function(t){e.imageList.length=0,g.length=0,e.checkboxSelected.whether=!1,e.allNeedDo.length=0,0===e.iSelectActiveTab&&"output"==t?(y("2",1,e.iSelectActiveTab),e.whetherOutput=!0):0===e.iSelectActiveTab&&"send"==t?(b("2",4,0),e.whetherOutput=!1):1===e.iSelectActiveTab&&"output"==t?(y("",1,e.iSelectActiveTab,{allBall:0}),e.whetherOutput=!0):1===e.iSelectActiveTab&&"send"==t&&(b("",4,0,[0]),e.whetherOutput=!1),console.log(e.allNeedDo),e.$emit(t)},e.getTicket=function(){e.orderInfo.whetherHaveGetTicket=!e.orderInfo.whetherHaveGetTicket},e.confirmSendPrize=function(){if(!1!==f.sendPrize.check){var t={id:e.orderInfo.id,returnImg:g.join(","),payPassword:e.returnParams.payPassword,returnMoney:e.orderInfo.nowTotalWinamt,whetherHaveGetTicket:e.orderInfo.whetherHaveGetTicket?1:0};l.AjaxConfirmSendPrize(t).then(function(t){if(console.log(t),t){e.allNeedDo.splice(e.allNeedDo.length-e.orderInfo.index-1,1),e.modalSendDetailModal.hide();var r=!0,a=!1,o=void 0;try{for(var n,s=e.allNeedDo.entries()[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i=n.value,c=_slicedToArray(i,2),l=c[0];c[1].index=e.allNeedDo.length-l-1}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}g.length=0,e.$emit("sendtSuc",e.iSelectActiveTab)})}else h.showShortCenter("您没有派奖的权限")},e.showSendDetail=function(t){e.orderInfo=e.allNeedDo[t],d.index!==t&&(e.imageList.length=0,g.length=0,e.checkboxSelected.whether=!1,e.orderInfo.whetherHaveGetTicket=!1),e.modalSendDetailModal.show(),e.returnParams.payPassword="",d.index=t},e.$on("quickOutput",function(t){if(e.allNeedDo[0]){if(e.whetherFromQuickOutput=!0,e.checkboxSelected.whether=!1,0===e.iSelectActiveTab){e.eachOrder=e.allNeedDo[C],e.nowOutputOrderInfo=e.allNeedDo[0],e.nowOutputOrder=e.allNeedDo[0].lotteryList;for(var r=0,a=0;a<e.nowOutputOrder.length;a++)r+=e.nowOutputOrder[a].betAmount,e.nowOutputOrder[a].nums=o.split(e.nowOutputOrder[a].investCode);e.nowTotalBetsAmount=r,e.eachOrder=e.allNeedDo[0],e.modalBetTicket.show()}if(1===e.iSelectActiveTab){e.eachOrder=e.allNeedDo[C];var n={id:e.eachOrder.id};l.AjaxGetFootballOrderDetail(n).then(function(t){t&&(e.nowOutputOrderInfo=e.allNeedDo[0],e.oFootballOrders=t,e.footballModal.show())})}}}),e.openDelegate=function(){if(e.delegatePassword.password="",!1!==f.entruse.check){if(!e.allNeedDo[0])return!1;var t=!0,r=!1,a=void 0;try{for(var o,n=e.allNeedDo[Symbol.iterator]();!(t=(o=n.next()).done);t=!0)o.value.delegateStatus=1}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}}else h.showShortCenter("您没有委托订单的权限")},e.delegateClickThis=function(t){2===e.allNeedDo[t].delegateStatus?e.allNeedDo[t].delegateStatus=1:1===e.allNeedDo[t].delegateStatus&&(e.allNeedDo[t].delegateStatus=2)},e.wantToDelegate=function(){l.checkHaveDelegateOrder(e.allNeedDo)?e.delegateOrderModal.show():alert("您还未选择委托订单")},e.cancelDelegate=function(){if(!0===e.whetherOutput){var t=!0,r=!1,a=void 0;try{for(var o,n=e.allNeedDo[Symbol.iterator]();!(t=(o=n.next()).done);t=!0)o.value.delegateStatus=0}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}}e.delegateStatus="委托"},e.chooseAllToDelegate=function(){if(e.allNeedDo[0]){var t=!0,r=!1,a=void 0;try{for(var o,n=e.allNeedDo[Symbol.iterator]();!(t=(o=n.next()).done);t=!0)o.value.delegateStatus=2}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}e.delegateStatus="确认委托"}},e.confirmDelegateOrders=function(){l.AjaxConfirmDelegateOrders(e.allNeedDo,e.delegatePassword.password).then(function(t){console.log(t),t.amount&&(e.allNeedDo=t.aNowAllNeedDO,e.delegateOrderModal.hide(),e.delegateStatus="委托",e.$emit("outputSuc",e.iSelectActiveTab,[t.amount]))})},e.gotoAllOrder=function(){e.$emit("gotoAllOrder"),u.go("modules.orders.allOrders")},e.closeModalFootball=function(){e.footballModal.hide()},e.$on("haveBigLotteryOutputApply",function(r,a){console.log("大乐透子级"),console.log(a),0===e.iSelectActiveTab&&!0===e.whetherOutput&&1===t.nowModule.index&&D("2",1,e.iSelectActiveTab,{orderInfoID:a,haveCloseLoading:!1})}),e.$on("haveFootballOutputApply",function(r,a){console.log("足彩子级"),console.log(a),1===e.iSelectActiveTab&&!0===e.whetherOutput&&t.nowModule.index,D("",1,e.iSelectActiveTab,{allBall:0,orderInfoID:a,haveCloseLoading:!1})}),e.closeLargeImgModal=function(){e.modalQr.hide()},a.fromTemplateUrl("orders/template/betTicketModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalBetTicket=t}),e.closeModalBetTicket=function(){e.modalBetTicket.hide()},a.fromTemplateUrl("orders/template/orderDetailModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalBetTicketDetail=t}),a.fromTemplateUrl("orders/template/orderDetailSendModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalSendDetailModal=t}),a.fromTemplateUrl("orders/template/footballModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.footballModal=t}),a.fromTemplateUrl("common/template/largeImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalQr=t}),a.fromTemplateUrl("openDelegateOrderModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.delegateOrderModal=t})}]);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.ordersCtrl",[]).controller("ordersCtrl",["$scope","$rootScope","Ajax","locals","$cordovaToast",function(e,t,r,a,o){var n=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.sendTo(url+"/order/getPending",a.get("token"),{closeLoading:!1});case 3:n=t.sent,console.log(n),e.dlt=n.data.dlt,e.zc=n.data.zucai,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.info?o.showShortCenter(t.t0.info):o.showShortCenter(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}();e.whetherOutput=!0,t.nowModule={index:1},2==a.get("iSelectActiveTab")?e.iSelectActiveTab=0:e.iSelectActiveTab=a.get("iSelectActiveTab")||0,"true"===a.get("whetherFromClientToAllOrder")&&(e.iSelectActiveTab=2,a.set("whetherFromClientToAllOrder","false")),console.log(e.iSelectActiveTab),a.set("iSelectActiveTab",e.iSelectActiveTab),n(),e.activeTab=function(r){e.iSelectActiveTab=r,e.whetherOutput=2!==r,a.set("iSelectActiveTab",r),t.$broadcast("changeActiveTab",r)},e.quickOutput=function(){e.$broadcast("quickOutput")},e.$on("send",function(){e.whetherOutput=!1}),e.$on("output",function(){e.whetherOutput=!0}),e.$on("gotoAllOrder",function(){console.log(11),e.iSelectActiveTab=2,e.whetherOutput=!1}),e.$on("outputSuc",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1];s(t,_slicedToArray(r,1)[0])}),e.$on("sendtSuc",function(e,t){s(t,1)}),e.$on("haveBigLotteryOutputApply",function(){e.$apply(function(){e.dlt+=1,console.log("父级")})}),e.$on("haveFootballOutputApply",function(){e.$apply(function(){e.zc+=1})});function s(t,r){0===t&&e.dlt>0?e.$apply(function(){e.dlt-=r}):1===t&&e.zc>0&&e.$apply(function(){e.zc-=r})}}]);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}angular.module("order.services",[]).factory("splitCode",[function(){var e={};return e.split=function(e){var t=e.split("*"),r=[];return r[0]=t[0].split(","),r[1]=t[1].split(","),r},e}]).factory("orderService",["splitCode","Ajax","locals","PicMethods","$rootScope","addBefore","$cordovaToast",function(e,t,r,a,o,n,s){var i=function(){function e(t,r,a,o,n,s){_classCallCheck(this,e),this.pageNumber=t,this.pageSize=r,this.lotteryID=a,this.status=o,this.allBall=n,this.orderInfoID=s}return _createClass(e,[{key:"returnParams",value:function(){return{pageNumber:this.pageNumber,pageSize:this.pageSize,lotteryID:this.lotteryID,status:this.status,allBall:this.allBall,orderInfoID:this.orderInfoID,entrust:0}}}]),e}();function c(e){var t=[],r=e.split("#"),a=!0,o=!1,n=void 0;try{for(var s,i=r[Symbol.iterator]();!(a=(s=i.next()).done);a=!0)switch(s.value.charAt(0)){case"3":t.push("主胜");break;case"1":t.push("平");break;case"0":t.push("主负")}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return t}function l(e,t){var r=[],a=e.split("#"),o=!0,n=!1,s=void 0;try{for(var i,c=a[Symbol.iterator]();!(o=(i=c.next()).done);o=!0)switch(i.value.charAt(0)){case"3":r.push("让胜("+t+")");break;case"1":r.push("让平("+t+")");break;case"0":r.push("让负("+t+")")}}catch(e){n=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw s}}return r}function u(e){var t=[],r=e.split("#"),a=!0,o=!1,n=void 0;try{for(var s,i=r[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value;c&&("9"===c.charAt(0)&&"9"===c.charAt(1)?t.push("平其他"):"0"===c.charAt(0)&&"9"===c.charAt(1)?t.push("负其他"):"9"===c.charAt(0)&&"0"===c.charAt(1)?t.push("胜其他"):t.push(c.charAt(0)+":"+c.charAt(1)))}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return t}function h(e){var t=[],r=e.split("#"),a=!0,o=!1,n=void 0;try{for(var s,i=r[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value;c&&t.push(c.charAt(0)+"球")}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return t}function d(e,t){switch(e){case"500":t.sXInY="单关";break;case"502":t.sXInY="2串1";break;case"503":t.sXInY="3串1";break;case"504":t.sXInY="4串1";break;case"505":t.sXInY="5串1";break;case"506":t.sXInY="6串1";break;case"507":t.sXInY="7串1";break;case"508":t.sXInY="8串1";break;case"526":t.sXInY="3串3";break;case"527":t.sXInY="3串4";break;case"539":t.sXInY="4串4";break;case"540":t.sXInY="4串5";break;case"528":t.sXInY="4串6";break;case"529":t.sXInY="4串11";break;case"544":t.sXInY="5串5";break;case"545":t.sXInY="5串6";break;case"530":t.sXInY="5串10";break;case"541":t.sXInY="5串16";break;case"531":t.sXInY="5串20";break;case"532":t.sXInY="5串26";break;case"549":t.sXInY="6串6";break;case"550":t.sXInY="6串7";break;case"533":t.sXInY="6串15";break;case"542":t.sXInY="6串20";break;case"546":t.sXInY="6串22";break;case"534":t.sXInY="6串35";break;case"543":t.sXInY="6串42";break;case"535":t.sXInY="6串50";break;case"536":t.sXInY="6串57";break;case"553":t.sXInY="7串7";break;case"554":t.sXInY="7串8";break;case"551":t.sXInY="7串21";break;case"547":t.sXInY="7串35";break;case"537":t.sXInY="7串120";break;case"556":t.sXInY="8串8";break;case"557":t.sXInY="8串9";break;case"555":t.sXInY="8串28";break;case"552":t.sXInY="8串56";break;case"548":t.sXInY="8串70";break;case"538":t.sXInY="8串247"}}function p(e){var t=[],r=e.split("#"),a=!0,o=!1,n=void 0;try{for(var s,i=r[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value;switch(c.charAt(0)+c.charAt(1)){case"00":t.push("负负");break;case"01":t.push("负平");break;case"03":t.push("负胜");break;case"11":t.push("平平");break;case"10":t.push("平负");break;case"13":t.push("平胜");break;case"33":t.push("胜胜");break;case"31":t.push("胜平");break;case"30":t.push("胜负")}}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return t}return{httpParams:i,prizeHttpParams:function(e){_inherits(t,i);function t(e,r,a,o,n,s){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a,o,s));return i.isReturn=n,i}return _createClass(t,[{key:"returnParams",value:function(){return{pageNumber:this.pageNumber,pageSize:this.pageSize,lotteryID:this.lotteryID,status:this.status,isReturn:this.isReturn,allBall:this.allBall,entrust:0}}}]),t}(),AjaxNeedOutput:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,o,n,i,c,l){var u,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=new this.httpParams(1,200,a,o,n,c).returnParams(),e.next=4,t.sendTo(url+"/order/getList",r.get("token"),{params:u,haveCloseLoading:l});case 4:return h=e.sent,h=this.addStatusAndType(h.data,i),console.log(h),e.abrupt("return",h);case 10:e.prev=10,e.t0=e.catch(0),e.t0.info?s.showShortCenter(e.t0.info):s.showShortCenter(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,r,a,o,n,s){return e.apply(this,arguments)}}(),AjaxNeedSend:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,o,n,i){var c,l,u,h,d,p,g,m,f,w,v,S,C,y,b,D,x,T,k,O,M;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new this.prizeHttpParams(1,200,a,o,n,i).returnParams(),e.next=4,t.sendTo(url+"/order/getList",r.get("token"),{params:c});case 4:l=e.sent,console.log(l),u=[],h=!0,d=!1,p=void 0,e.prev=10,g=l.data.entries()[Symbol.iterator]();case 12:if(h=(m=g.next()).done){e.next=45;break}for(f=m.value,w=_slicedToArray(f,2),v=w[0],"2"===(S=w[1]).lotteryID?S.lotteryType="超级大乐透":0===S.lotteryID.indexOf("202")&&(S.lotteryType="竞彩足球"),S.whetherHaveGetTicket=!1,C=[0,S.lotteryList],y=C[0],b=C[1],D=!0,x=!1,T=void 0,e.prev=23,k=b[Symbol.iterator]();!(D=(O=k.next()).done);D=!0)M=O.value,y+=M.winamt;e.next=31;break;case 27:e.prev=27,e.t0=e.catch(23),x=!0,T=e.t0;case 31:e.prev=31,e.prev=32,!D&&k.return&&k.return();case 34:if(e.prev=34,!x){e.next=37;break}throw T;case 37:return e.finish(34);case 38:return e.finish(31);case 39:S.nowTotalWinamt=y,S.index=v,u.unshift(S);case 42:h=!0,e.next=12;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(10),d=!0,p=e.t1;case 51:e.prev=51,e.prev=52,!h&&g.return&&g.return();case 54:if(e.prev=54,!d){e.next=57;break}throw p;case 57:return e.finish(54);case 58:return e.finish(51);case 59:return e.abrupt("return",u);case 62:e.prev=62,e.t2=e.catch(0),e.t2.info?s.showShortCenter(e.t2.info):s.showShortCenter(e.t2);case 65:case"end":return e.stop()}},e,this,[[0,62],[10,47,51,59],[23,27,31,39],[32,,34,38],[52,,54,58]])}));return function(t,r,a,o){return e.apply(this,arguments)}}(),AjaxConfirmSendPrize:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.sendTo(url+"/order/return",r.get("token"),{params:a});case 3:return o=e.sent,console.log(o),s.showShortCenter("派奖成功"),e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(0),e.t0.info?s.showShortCenter(e.t0.info):s.showShortCenter(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),addStatusAndType:function(t,r){var a=[],o=!0,s=!1,i=void 0;try{for(var c,l=t.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,h=_slicedToArray(u,2),d=h[0],p=h[1];if(1===p.entrust?p.statusChina="委托":-1===p.status&&0===p.entrust?p.statusChina="出票失败":1===p.status&&0===p.entrust?(p.statusChina="待出票",p.delegateStatus=0):2===p.status&&0===p.entrust?p.statusChina="已出票":3===p.status&&0===p.entrust?p.statusChina="未中奖":4===p.status&&0===p.isReturn&&0===p.entrust?p.statusChina="待派奖":4===p.status&&1===p.isReturn&&0===p.entrust&&(p.statusChina="已派奖"),"2"===p.lotteryID){p.lotteryType="超级大乐透";for(var g=[],m=0;m<p.lotteryList.length;m++){var f=e.split(p.lotteryList[m].investCode);g.push(f)}p.investCode=g}else 0===p.lotteryID.indexOf("202")&&(p.lotteryType="竞彩足球");var w=[0,p.lotteryList],v=w[0],S=w[1],C=!0,y=!1,b=void 0;try{for(var D,x=S[Symbol.iterator]();!(C=(D=x.next()).done);C=!0)v+=D.value.winamt}catch(e){y=!0,b=e}finally{try{!C&&x.return&&x.return()}finally{if(y)throw b}}p.nowTotalWinamt=v;var T=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();p.createDate.slice(0,10)===n.addMMDD0(T)?p.createDate="今日"+p.createDate.slice(11,16):p.createDate=""+p.createDate.slice(0,16),p.index=d,console.log(r),a.push(p)}}catch(e){s=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw i}}return a},AjaxGetFootballOrderDetail:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o,n,i,g,m,f,w,v,S,C,y,b,D,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={aFootballOrders:[],sXInY:"",multiple:""},e.prev=1,e.next=4,t.sendTo(url+"/order/getInfo",r.get("token"),{params:a});case 4:n=e.sent,console.log(n),i=[],g=n.data.lotteryList[0].investCode.split("^"),m=!0,f=!1,w=void 0,e.prev=11,v=g[Symbol.iterator]();case 13:if(m=(S=v.next()).done){e.next=38;break}C=S.value,y=[],b=C.split("|"),e.t0=b[3],e.next="20201"===e.t0?20:"20202"===e.t0?23:"20203"===e.t0?26:"20204"===e.t0?29:"20206"===e.t0?32:35;break;case 20:return y=c(b[5]),i.push(y),e.abrupt("break",35);case 23:return y=u(b[5]),i.push(y),e.abrupt("break",35);case 26:return y=h(b[5]),i.push(y),e.abrupt("break",35);case 29:return y=p(b[5]),i.push(y),e.abrupt("break",35);case 32:return y=l(b[5],b[4]),i.push(y),e.abrupt("break",35);case 35:m=!0,e.next=13;break;case 38:e.next=44;break;case 40:e.prev=40,e.t1=e.catch(11),f=!0,w=e.t1;case 44:e.prev=44,e.prev=45,!m&&v.return&&v.return();case 47:if(e.prev=47,!f){e.next=50;break}throw w;case 50:return e.finish(47);case 51:return e.finish(44);case 52:for(D=0;D<n.data.lotteryList[0].ballHistory.length;D++)(x={}).hostTeam=n.data.lotteryList[0].ballHistory[D].hostTeam,x.visitTeam=n.data.lotteryList[0].ballHistory[D].visitTeam,x.oneMethod=i[D].join(","),o.aFootballOrders.push(x);return d(n.data.lotteryList[0].betWay,o),o.multiple=n.data.lotteryList[0].multiple,console.log(o),e.abrupt("return",o);case 59:e.prev=59,e.t2=e.catch(1),e.t2.info?s.showShortCenter(e.t2.info):s.showShortCenter(e.t2);case 62:case"end":return e.stop()}},e,this,[[1,59],[11,40,44,52],[45,,47,51]])}));return function(t){return e.apply(this,arguments)}}(),AjaxConfirmDelegateOrders:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,o){var n,i,c,l,u,h,d,p,g,m,f,w,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(o),n=a.filter(function(e){return 2===e.delegateStatus}).map(function(e){return e.id}),i={payPassword:o,id:n},console.log(n),e.next=7,t.sendTo(url+"/order/orderEntrust",r.get("token"),{params:i});case 7:for(c=e.sent,console.log(c),s.showShortCenter("委托成功"),l=a.filter(function(e){return 2!==e.delegateStatus}),u=!0,h=!1,d=void 0,e.prev=14,p=l.entries()[Symbol.iterator]();!(u=(g=p.next()).done);u=!0)m=g.value,f=_slicedToArray(m,2),w=f[0],(v=f[1]).index=w,v.delegateStatus=0;e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),h=!0,d=e.t0;case 22:e.prev=22,e.prev=23,!u&&p.return&&p.return();case 25:if(e.prev=25,!h){e.next=28;break}throw d;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",{aNowAllNeedDO:l,amount:n.length});case 33:e.prev=33,e.t1=e.catch(0),e.t1.info?s.showShortCenter(e.t1.info):s.showShortCenter(e.t1);case 36:case"end":return e.stop()}},e,this,[[0,33],[14,18,22,30],[23,,25,29]])}));return function(t,r){return e.apply(this,arguments)}}(),dealXInY:function(e,t){d(e,t)},checkHaveDelegateOrder:function(e){console.log(e);var t=!1,r=!0,a=!1,o=void 0;try{for(var n,s=e[Symbol.iterator]();!(r=(n=s.next()).done);r=!0)2===n.value.delegateStatus&&(t=!0)}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return t}}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.redBagCtrl",[]).controller("redBagCtrl",["$rootScope","$scope","redBagService","$ionicModal","Ajax","locals","PicMethods","$ionicActionSheet","$ionicLoading","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l){e.nowModule={index:6},t.allMonth=r.month,console.log(t.allMonth),t.whetherShowAllMonth=!1,t.nowMonth=(new Date).getMonth()+1;var u=[];t.imageUploadList=[],t.imageCheckList=[],t.checkboxSelected={whether:!1},t.showLastPic=!1,t.allRedBags=[];var h=new Date,d={startDate:h.getFullYear()+"-"+(h.getMonth()+1)+"-01",endDate:h.getFullYear()+"-"+(h.getMonth()+2)+"-01"};r.AjaxGetBalance(d).then(function(e){t.balance=e.data});var p=t.moreRedBagData={moredata:!0,eachOrder:[],alter:!1,params:{pageNumber:1,pageSize:10,startDate:h.getFullYear()+"-"+(h.getMonth()+1)+"-01",endDate:h.getFullYear()+"-"+(h.getMonth()+2)+"-01"},loadMore:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!0!==p.moredata||!1!==p.alter){e.next=11;break}return a=p.params,e.next=5,o.sendTo(url+"/redPacket/getPacket",n.get("token"),{params:a});case 5:s=e.sent,console.log(s),s.data.length===p.params.pageSize?(p.eachOrder=p.eachOrder.concat(s.data),t.allRedBags=r.dealResponseData(p.eachOrder),p.params.pageNumber+=1):0!==s.data.length&&s.data.length<=p.params.pageSize?(p.eachOrder=p.eachOrder.concat(s.data),t.allRedBags=r.dealResponseData(p.eachOrder),t.showLastPic=!0,p.moredata=!1):0===s.data.length&&(t.showLastPic=!0,p.moredata=!1),console.log(t.allRedBags),p.alter=!1,t.$broadcast("scroll.infiniteScrollComplete");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.info?l.showShortCenter(e.t0.info):l.showShortCenter(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}()};t.showRedBagModal=function(e){t.imageCheckList.length=0,t.imageUploadList.length=0,u.length=0,t.checkboxSelected.whether=!1,t.thisRedBag=t.allRedBags[e],console.log(t.thisRedBag),t.modalRedBag.show()},t.checkMore=function(){console.log(t.eachOrder),t.isCheckMore=!0},t.closeCheckMore=function(){t.isCheckMore=!1},t.$on("modal.hidden",function(){t.isCheckMore=!1});function g(e,r,a){"0"===e.error?(u.push(e.data),t.imageUploadList.push(r),console.log(u),a&&c.hide()):l.showShortCenter(e.info),t.imageUploadList.length>3&&l.showShortCenter("最多上传3张凭证图片,请删除多余图片")}t.showAction=function(){if(t.imageUploadList.length<3)var e=i.show({buttons:[{text:"拍照"},{text:"从相册选择"}],titleText:"请选择",cancelText:"取消",cancel:function(){return!0},buttonClicked:function(r){0===r?s.takePhoto(g,t.imageUploadList.length):1===r&&s.pickImage(g,t.imageUploadList.length),e()}});else l.showShortCenter("最多上传3张凭证图片")},t.showLargeUploadImg=function(e){t.uploadImgSrc=e,t.modalQr.show()},t.deleteUploadImg=function(e){u.splice(e,1),t.imageUploadList.splice(e,1),console.log(u)},t.checkUploadImg=function(e){if(t.checkboxSelected.whether=!t.checkboxSelected.whether,!0===t.checkboxSelected.whether){t.imageCheckList.length=0;var r=!0,a=!1,o=void 0;try{for(var n,i=t.thisRedBag.printImg.split(",")[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var c=n.value;s.downloadFile(c,"downloadReaBagImgSucceed")}}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}}},t.$on("downloadReaBagImgSucceed",function(e,r){t.imageCheckList.push(r)}),t.searchOneMonth=function(e){t.nowMonth=e,p.params={pageNumber:1,pageSize:15,startDate:h.getFullYear()+"-"+1*e+"-01",endDate:h.getFullYear()+"-"+(1*e+1)+"-01 "},console.log(p.params),t.allRedBags.length=0,p.eachOrder.length=0,p.moredata=!0,t.showLastPic=!1,p.loadMore(),p.alter=!0,d={startDate:h.getFullYear()+"-"+1*e+"-01",endDate:h.getFullYear()+"-"+(1*e+1)+"-01 "},r.AjaxGetBalance(d).then(function(e){t.$apply(function(){t.balance=e.data})})},t.cancelUploadRedBagImg=function(){t.modalRedBag.hide()},t.confirmUploadRedBagImg=function(){if(u){var e={id:t.thisRedBag.id,printImg:u.join(",")};r.AjaxUploadRedBagImg(e).then(function(){t.imageCheckList.length=0,t.imageUploadList.length=0,t.allRedBags[t.thisRedBag.index].printImg=e.printImg,u.length=0,t.checkboxSelected.whether=!1,t.modalRedBag.hide()})}},a.fromTemplateUrl("redBag/template/redBagModal.html",{scope:t,backdropClickToClose:!0}).then(function(e){t.modalRedBag=e}),a.fromTemplateUrl("common/template/largeImgModal.html",{scope:t,backdropClickToClose:!0}).then(function(e){t.modalQr=e})}]);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.redBagService",[]).factory("redBagService",["splitCode","orderService","locals","Ajax","$cordovaToast",function(e,t,r,a,o){return{month:["1","2","3","4","5","6","7","8","9","10","11","12"],dealResponseData:function(r){var a=[],o=!0,n=!1,s=void 0;try{for(var i,c=r.entries()[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value,u=_slicedToArray(l,2),h=u[0],d=u[1],p={};if(p.id=d.orderInfo.id,p.date=d.createDate.substring(5,10),p.nickName=d.customer.nickName,p.phone=d.customer.phone,p.orderMoney=d.orderInfo.money,p.redBag=d.money,p.printImg=d.orderInfo.printImg,p.index=h,"2"===d.orderInfo.lotteryID){p.lotteryType="超级大乐透";for(var g=[],m=0;m<d.orderInfo.lotteryList.length;m++){var f=e.split(d.orderInfo.lotteryList[m].investCode);g.push(f)}p.investCode=g}else 0===d.orderInfo.lotteryID.indexOf("202")&&(p.lotteryType="竞彩足球",t.dealXInY(d.orderInfo.lotteryList[0].betWay,p),p.multiple=d.orderInfo.lotteryList[0].multiple);a.push(p)}}catch(e){n=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw s}}return a},AjaxUploadRedBagImg:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.sendTo(url+"/redPacket/uploadVoucher",r.get("token"),{params:t});case 3:n=e.sent,console.log(n),o.showShortCenter("补图成功"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.info?o.showShortCenter(e.t0.info):o.showShortCenter(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),AjaxGetBalance:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.sendTo(url+"/redPacket/dataStatistic",r.get("token"),{params:t});case 3:return n=e.sent,console.log(n),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),e.t0.info?o.showShortCenter(e.t0.info):o.showShortCenter(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()}}]);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.walletCharge",[]).controller("walletChargeCtrl",["$scope","$rootScope","Ajax","$state","locals","walletIndexService","walletService","walletVerifyService","PicMethods","$cordovaToast",function(e,t,r,a,o,n,s,i,c,l){var u=this,h=o.getObject("userRights");e.showLastPic=!1,e.allCharges=[];var d=e.moreChargeApply={moredata:!0,eachOrder:[],params:{type:1,status:0,pageNumber:1,pageSize:20},loadMore:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,s,i,c,h,p,g,m,f,w,v,S,C,y,b,D,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==d.moredata){t.next=58;break}return a=d.params,t.next=5,r.sendTo(url+"/bill/getList",o.get("token"),{params:a});case 5:if(n=t.sent,console.log(n),n.data.length!==d.params.pageSize){t.next=31;break}for(e.allCharges=d.eachOrder=d.eachOrder.concat(n.data),s=!0,i=!1,c=void 0,t.prev=12,h=e.allCharges.entries()[Symbol.iterator]();!(s=(p=h.next()).done);s=!0)g=p.value,m=_slicedToArray(g,2),m[0],(f=m[1]).nowClick=!1,f.afterDoneCharge="";t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),i=!0,c=t.t0;case 20:t.prev=20,t.prev=21,!s&&h.return&&h.return();case 23:if(t.prev=23,!i){t.next=26;break}throw c;case 26:return t.finish(23);case 27:return t.finish(20);case 28:d.params.pageNumber+=1,t.next=57;break;case 31:if(!(0!==n.data.length&&n.data.length<=d.params.pageSize)){t.next=56;break}for(e.allCharges=d.eachOrder=d.eachOrder.concat(n.data),w=!0,v=!1,S=void 0,t.prev=36,C=e.allCharges.entries()[Symbol.iterator]();!(w=(y=C.next()).done);w=!0)b=y.value,D=_slicedToArray(b,2),D[0],(x=D[1]).nowClick=!1,x.afterDoneCharge="";t.next=44;break;case 40:t.prev=40,t.t1=t.catch(36),v=!0,S=t.t1;case 44:t.prev=44,t.prev=45,!w&&C.return&&C.return();case 47:if(t.prev=47,!v){t.next=50;break}throw S;case 50:return t.finish(47);case 51:return t.finish(44);case 52:e.showLastPic=!0,d.moredata=!1,t.next=57;break;case 56:0===n.data.length&&(e.showLastPic=!0,d.moredata=!1);case 57:e.$broadcast("scroll.infiniteScrollComplete");case 58:t.next=63;break;case 60:t.prev=60,t.t2=t.catch(0),t.t2.info?l.showShortCenter(t.t2.info):l.showShortCenter(t.t2);case 63:case"end":return t.stop()}},t,u,[[0,60],[12,16,20,28],[21,,23,27],[36,40,44,52],[45,,47,51]])}));return function(){return t.apply(this,arguments)}}()};"charge"===n.feature?(e.view=s.featureChoose("charge"),d.params.type=1):"withdraw"===n.feature&&(e.view=s.featureChoose("withdraw"),d.params.type=2),e.showVerify=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(i){var c,d,p,g,m,f,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==h.rechargeAudit.check||"charge"!==n.feature){t.next=5;break}return l.showShortCenter("您没有审核充值的权限"),t.abrupt("return");case 5:if(!1!==h.cashAudit.check||"withdraw"!==n.feature){t.next=8;break}return l.showShortCenter("您没有审核提现的权限"),t.abrupt("return");case 8:for(c=!0,d=!1,p=void 0,t.prev=11,g=e.allCharges[Symbol.iterator]();!(c=(m=g.next()).done);c=!0)m.value.nowClick=!1;t.next=19;break;case 15:t.prev=15,t.t0=t.catch(11),d=!0,p=t.t0;case 19:t.prev=19,t.prev=20,!c&&g.return&&g.return();case 22:if(t.prev=22,!d){t.next=25;break}throw p;case 25:return t.finish(22);case 26:return t.finish(19);case 27:return e.allCharges[i].nowClick=!0,t.prev=28,f={id:e.allCharges[i].id},t.next=32,r.sendTo(url+"/bill/getInfo",o.get("token"),{params:f});case 32:w=t.sent,console.log(w),w.data.createDate=w.data.createDate.slice(0,10),w.data.index=i,s.eachChargeDetail=w.data,console.log(s.eachChargeDetail),a.go("modules.wallet.charge.verify",{id:e.allCharges[i].id}),t.next=44;break;case 41:t.prev=41,t.t1=t.catch(28),t.t1.info?l.showShortCenter(t.t1.info):l.showShortCenter(t.t1);case 44:case"end":return t.stop()}},t,u,[[11,15,19,27],[20,,22,26],[28,41]])}));return function(e){return t.apply(this,arguments)}}(),e.$on("chargeAuditSucceed",function(t,r){var a=void 0;switch("charge"===n.feature?a=i.featureChoose("charge"):"withdraw"===n.feature&&(a=i.featureChoose("withdraw")),r.afterDoneCharge){case"agree":e.allCharges[r.index].afterDoneCharge=a.alertText1;break;case"edit":e.allCharges[r.index].afterDoneCharge=a.alertText2;break;case"reject":e.allCharges[r.index].afterDoneCharge=a.alertText3}}),e.chargeToCust=function(){!1!==h.recharge.check||"charge"!==n.feature?!1!==h.cash.check||"withdraw"!==n.feature?a.go("modules.wallet.charge.toCustomer"):l.showShortCenter("您没有发起提现的权限"):l.showShortCenter("您没有发起充值的权限")},e.$on("haveChargeApply",function(r,a){if(console.log("充值子级"),console.log(a),2===t.nowModule.index&&"charge"===n.feature){var o={pageNumber:1,pageSize:20,billId:a};s.addPushCharge(o,!1).then(function(t){console.log(t),e.$apply(function(){e.allCharges.push(t)}),console.log(e.allCharges)})}}),e.$on("haveWithdrawApply",function(r,a){if(console.log("提现子级"),console.log(a),2===t.nowModule.index&&"withdraw"===n.feature){var o={pageNumber:1,pageSize:20,billId:a};s.addPushCharge(o,!1).then(function(t){e.$apply(function(){e.allCharges.push(t)}),console.log(e.allCharges)})}})}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.walletChargeDetail",["wallet.services"]).controller("walletChargeDetailCtrl",["$scope","$ionicLoading","Ajax","$ionicPopover","$ionicActionSheet","$cordovaToast","PicMethods","$ionicModal","locals","walletIndexService","walletService","walletVerifyService",function(e,t,r,a,o,n,s,i,c,l,u,h){var d=this,p=[c.get("token"),[],[]],g=p[0],m=p[1],f=p[2];e.editImagesList=[],e.rejectImagesList=[],e.getApplyRechargeImages=[],e.afterOperation={charge:!1,edited:!1,rejected:!1,done:!1},e.chargeConfirm=!1,e.rejectCharge=!1,e.chargeVoucher=!1,e.editedCharge={money:void 0,trueOrFalse:!1},e.eachChargeDetail=u.eachChargeDetail,e.submitCharge={money:e.eachChargeDetail.money/100,password:""},e.oVerifyView=h.featureChoose(),e.agreeCharge=function(){e.chargeConfirm=!0,e.editedCharge.trueOrFalse=!1,e.rejectCharge=!1,e.chargeVoucher=!1,e.submitCharge.password="",e.popInputPass.show()},e.doEditCharge=function(t){t.stopPropagation(),e.chargeConfirm=!1,e.chargeVoucher=!1,e.editedCharge.trueOrFalse=!e.editedCharge.trueOrFalse,e.rejectCharge=!1,e.submitCharge.password=""},e.confirmEditCharge=function(){e.editImagesList.length>3?n.showShortCenter("最多上传3张凭证图片,请删除多余图片"):e.editedCharge.money?(e.popInputPass.show(),e.submitCharge.money=e.editedCharge.money,e.editedCharge.trueOrFalse=!0):n.showShortCenter("请输入修改的充值金额")},e.doRejectCharge=function(t){t.stopPropagation(),e.chargeConfirm=!1,e.chargeVoucher=!1,e.editedCharge.trueOrFalse=!1,e.rejectCharge=!0,e.submitCharge.password=""},e.rejectChargeHttp=function(){e.rejectImagesList.length>3?n.showShortCenter("最多上传3张凭证图片,请删除多余图片"):(e.popInputPass.show(),e.submitCharge.money=u.eachChargeDetail.money/100)},e.seekChargeVoucher=function(t){if(t.stopPropagation(),e.chargeConfirm=!1,e.chargeVoucher=!0,e.editedCharge.trueOrFalse=!1,e.rejectCharge=!1,e.eachChargeDetail.customerImg){var r=!0,a=!1,o=void 0;try{for(var n,s=e.eachChargeDetail.customerImg.split(",")[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i=n.value;e.getApplyRechargeImages.push(i)}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}},e.backToCharge=function(){e.editedCharge.trueOrFalse=!1,e.rejectCharge=!1,e.chargeVoucher=!1,e.chargeConfirm=!1,e.submitCharge.password=""},e.confirmVerify=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o,s,i,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(6!==e.submitCharge.password.toString().length){t.next=60;break}if(a=document.getElementById("chargePass"),t.prev=2,!0!==e.chargeConfirm){t.next=18;break}return a.blur(),(o=h.getAjaxParams("agree").oParams).payPassword=e.submitCharge.password,t.next=9,r.sendTo(url+"/bill/"+h.getAjaxParams("agree").fnDoThingUrl(),g,{params:o});case 9:t.sent,n.showShortCenter(e.oVerifyView.alertText1),e.popInputPass.remove(),e.afterOperation.charge=!0,e.afterOperation.done=!0,s={index:e.eachChargeDetail.index,afterDoneCharge:"agree"},e.$emit("chargeAuditSucceed",s),t.next=52;break;case 18:if(!0!==e.editedCharge.trueOrFalse){t.next=37;break}return a.blur(),(i=h.getAjaxParams("edit").oParams).payPassword=e.submitCharge.password,i.money=100*e.submitCharge.money,i.shopImg=m.join(","),t.next=26,r.sendTo(url+"/bill/"+h.getAjaxParams("edit").sDoThingUrl,g,{params:i});case 26:t.sent,e.eachChargeDetail.money=100*e.submitCharge.money,n.showShortCenter(e.oVerifyView.alertText2),e.popInputPass.remove(),e.afterOperation.edited=!0,e.afterOperation.done=!0,e.editedCharge.trueOrFalse=!1,c={index:e.eachChargeDetail.index,afterDoneCharge:"edit"},e.$emit("chargeAuditSucceed",c),t.next=52;break;case 37:if(!0!==e.rejectCharge){t.next=52;break}return a.blur(),(l=h.getAjaxParams("reject").oParams).payPassword=e.submitCharge.password,l.shopImg=f.join(","),t.next=44,r.sendTo(url+"/bill/"+h.getAjaxParams("reject").fnDoThingUrl(),g,{params:l});case 44:t.sent,n.showShortCenter(e.oVerifyView.alertText3),e.popInputPass.remove(),e.afterOperation.rejected=!0,e.afterOperation.done=!0,e.rejectCharge=!1,u={index:e.eachChargeDetail.index,afterDoneCharge:"reject"},e.$emit("chargeAuditSucceed",u);case 52:t.next=57;break;case 54:t.prev=54,t.t0=t.catch(2),t.t0.info?n.showShortCenter(t.t0.info):n.showShortCenter(t.t0);case 57:return t.prev=57,e.$apply(function(){e.submitCharge.password=""}),t.finish(57);case 60:case"end":return t.stop()}},t,d,[[2,54,57,60]])})),e.showLargeUploadImg=function(t){e.uploadImgSrc=t,e.modalQr.show()},e.showAction=function(){if(e.editImagesList.length<3&&e.rejectImagesList.length<3)var t=o.show({buttons:[{text:"拍照"},{text:"从相册选择"}],titleText:"请选择",cancelText:"取消",cancel:function(){return!0},buttonClicked:function(r){0===r&&!0===e.editedCharge.trueOrFalse?s.takePhoto(w,e.editImagesList.length):0===r&&!0===e.rejectCharge?s.takePhoto(w,e.rejectImagesList.length):1===r&&!0===e.editedCharge.trueOrFalse?s.pickImage(w,e.editImagesList.length):1===r&&!0===e.rejectCharge&&s.pickImage(w,e.rejectImagesList.length),t()}});else n("最多上传3张凭证图片")};function w(r,a,o){"0"===r.error?(!0===e.editedCharge.trueOrFalse?(m.push(r.data),e.editImagesList.push(a)):!0===e.rejectCharge&&(f.push(r.data),e.rejectImagesList.push(a)),o&&t.hide()):n(r.info),(e.editImagesList.length>3||e.rejectImagesList.length>3)&&n("最多上传3张凭证图片,请删除多余图片")}e.deleteUploadImg=function(t){!0===e.editedCharge.trueOrFalse?(m.splice(t,1),e.editImagesList.splice(t,1)):!0===e.rejectCharge&&(f.splice(t,1),e.rejectImagesList.splice(t,1))},e.closeLargeImgModal=function(){e.modalQr.hide()},a.fromTemplateUrl("./wallet/template/inputPassword.html",{scope:e,focusFirstInput:!0}).then(function(t){e.popInputPass=t}),e.openPopInputPass=function(t){e.popInputPass.show(t)},e.closePopInputPass=function(){e.popInputPass.hide()},e.$on("$destroy",function(){e.popInputPass.remove()}),e.$on("popInputPass.hidden",function(){}),e.$on("popInputPass.removed",function(){}),i.fromTemplateUrl("./common/template/largeImgModal.html",{scope:e,backdropClickToClose:!0}).then(function(t){e.modalQr=t})}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.walletChargeRecords",[]).controller("walletChargeRecordsCtrl",["$scope","locals","Ajax","$ionicPopover","walletRecordsService","dateCheck","$cordovaToast",function(e,t,r,a,o,n,s){e.oView=o.featureChoose(),e.whetherShowStatusChoose=!1,e.showLastPic=!1,e.allChargesSucOrder=[];var i=new Date;e.search={startDate:new Date(i.getFullYear(),i.getMonth(),i.getDate()-179),endDate:new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),ticketID:null,customerName:null,phone:""};var c=e.moreChargeSuc={moredata:!0,eachCharge:[],alter:!1,params:{type:e.oView.type,status:2,pageNumber:1,pageSize:15,phone:e.search.phone,customerName:e.search.customerName,startDate:e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),endDate:e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes()},loadMore:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var n,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!0!==c.moredata||!1!==c.alter){a.next=10;break}return n=c.params,a.next=5,r.sendTo(url+"/bill/getList",t.get("token"),{params:n});case 5:i=a.sent,console.log(i),i.data.length===c.params.pageSize?(o.addStatusWord(i.data),e.allChargesSucOrder=c.eachCharge=c.eachCharge.concat(i.data),c.params.pageNumber+=1):0!==i.data.length&&i.data.length<=c.params.pageSize?(o.addStatusWord(i.data),e.allChargesSucOrder=c.eachCharge=c.eachCharge.concat(i.data),c.params.pageNumber+=1,e.showLastPic=!0,c.moredata=!1):0===i.data.length&&(e.showLastPic=!0,c.moredata=!1),c.alter=!1,e.$broadcast("scroll.infiniteScrollComplete");case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),a.t0.info?s.showShortCenter(a.t0.info):s.showShortCenter(a.t0);case 15:case"end":return a.stop()}},a,this,[[0,12]])}));return function(){return a.apply(this,arguments)}}()};e.filterStatus=function(t){switch(console.log(t),t){case 0:c.params.status=1;break;case 1:c.params.status=-1}e.whetherShowStatusChoose=!1,e.choosedStatus=e.oView.allStatus[t]},e.searchallChargeSuc=function(){n.whetherInMonth(e.search.startDate,179)&&(e.showLastPic=!1,e.allChargesSucOrder.length=0,c.eachCharge.length=0,c.moredata=!0,c.params.phone=e.search.phone,c.params.customerName=e.search.customerName,c.params.startDate=e.search.startDate.getFullYear()+"-"+(e.search.startDate.getMonth()+1)+"-"+e.search.startDate.getDate()+" "+e.search.startDate.getHours()+":"+e.search.startDate.getMinutes(),c.params.endDate=e.search.endDate.getFullYear()+"-"+(e.search.endDate.getMonth()+1)+"-"+e.search.endDate.getDate()+" "+e.search.endDate.getHours()+":"+e.search.endDate.getMinutes(),c.params.pageNumber=1,c.loadMore(),c.alter=!0)},e.whetherInMonth=function(){n.whetherInMonth(e.search.startDate,179)}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("starter.walletChargeToCustomer",[]).controller("walletChargeToCustomerCtrl",["$scope","$rootScope","Ajax","$ionicPopover","locals","$state","walletToCustomerService","$cordovaToast",function(e,t,r,a,o,n,s,i){var c=this;e.ownerCharge={money:void 0,buyerId:"",password:"",remark:""},e.oView=s.featureChoose();var l=o.getObject("shopPerformance");console.log(l),e.addChargeCustomer=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.sendTo(url+"/auth/getCustomerList",o.get("token"));case 3:a=t.sent,e.allCustomersName=Array.from(a.data,function(e){return{nickName:e.nickName,buyerId:e.id}}),e.userListPopover.show(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.info?i.showShortCenter(t.t0.info):i.showShortCenter(t.t0);case 11:case"end":return t.stop()}},t,c,[[0,8]])})),e.chooseThisUser=function(t){e.userListPopover.hide(),e.userName=e.allCustomersName[t].nickName,e.ownerCharge.buyerId=e.allCustomersName[t].buyerId},e.comfirmCharge=_asyncToGenerator(regeneratorRuntime.mark(function a(){var s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s={money:100*e.ownerCharge.money,shopRemark:e.ownerCharge.remark,payPassword:e.ownerCharge.password,buyerId:e.ownerCharge.buyerId},a.next=4,r.sendTo(url+"/bill/"+e.oView.httpUrl,o.get("token"),{params:s});case 4:a.sent,t.nowChargeUser={userName:e.userName,money:e.ownerCharge.money},n.go("modules.wallet.charge.toCustomerWaitingInfo",{type:e.oView.urlShow}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),a.t0.info?i.showShortCenter(a.t0.info):i.showShortCenter(a.t0);case 12:case"end":return a.stop()}},a,c,[[0,9]])})),a.fromTemplateUrl("allCustomers.html",{scope:e}).then(function(t){e.userListPopover=t})}]),angular.module("starter.walletChargeToCustomerWaiting",[]).controller("walletChargeToCustomerWaitingCtrl",["walletToCustomerWaitingService","$scope",function(e,t){t.oView=e.featureChoose()}]),angular.module("starter.walletCtrl",[]).controller("walletCtrl",["$rootScope",function(e){e.nowModule={index:2}}]),angular.module("starter.walletIndexCtrl",["wallet.services"]).controller("walletIndexCtrl",["$scope","walletIndexService","$state","locals",function(e,t,r,a){var o=a.getObject("userRights");console.log(o[0]),e.doWallet=function(e){t.feature=e,r.go("modules.wallet.charge",{type:e})},e.goRecords=function(e){t.feature=e,r.go("modules.wallet.charge.records",{type:e})}}]);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var s=t[o](n),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}angular.module("wallet.services",[]).factory("walletIndexService",[function(){return{feature:"charge"}}]).factory("walletService",["locals","Ajax",function(e,t){var r={h3:"充值彩友",target:"申请充值",record:"充值记录",launch:"发起充值"},a={h3:"提现彩友",target:"申请提现",record:"提现记录",launch:"发起提现"};return{featureChoose:function(e){return"charge"===e?r:"withdraw"===e?a:void 0},lastChargeDatas:[],addPushCharge:function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(a,o){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.sendTo(url+"/bill/getList",e.get("token"),{params:a,haveCloseLoading:o});case 2:return n=r.sent,console.log(n),n.data[0].nowClick=!1,n.data[0].afterDoneCharge="",r.abrupt("return",n.data[0]);case 7:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}(),eachChargeDetail:{}}}]).factory("walletVerifyService",["walletService","walletIndexService",function(e,t){var r={h3:"充值金额审核",accept:"充值成功",edit:"请重新输入充值金额",illustrate:"充值说明",text1:"充值金额",text2:"拒绝充值的金额",alertText1:"充值成功",alertText2:"已修改金额并充值成功",alertText3:"已拒绝充值"},a={h3:"提现金额审核",accept:"提现成功",edit:"请重新输入提现金额",illustrate:"提现说明",text1:"提现金额",text2:"拒绝提现的金额",alertText1:"提现成功",alertText2:"已修改金额并提现成功",alertText3:"已拒绝提现"},o={oParams:{id:e.eachChargeDetail.id,status:1,payPassword:""},fnDoThingUrl:function(){return 1===e.eachChargeDetail.type?"rechargeAudit":2===e.eachChargeDetail.type?"cashAudit":void 0}},n={oParams:{id:e.eachChargeDetail.id,money:"",payPassword:"",shopImg:""},sDoThingUrl:"updateMoney"},s={oParams:{id:e.eachChargeDetail.id,status:-1,payPassword:"",shopImg:""},fnDoThingUrl:function(){return 1===e.eachChargeDetail.type?"rechargeAudit":2===e.eachChargeDetail.type?"cashAudit":void 0}};return{featureChoose:function(){return"charge"===t.feature?r:"withdraw"===t.feature?a:void 0},getAjaxParams:function(t){return"agree"===t?(o.oParams.id=e.eachChargeDetail.id,o):"edit"===t?(n.oParams.id=e.eachChargeDetail.id,n):"reject"===t?(s.oParams.id=e.eachChargeDetail.id,s):void 0}}}]).factory("walletRecordsService",["walletIndexService",function(e){var t={h3:"充值记录",th1:"充值金额",th2:"充值状态",th3:"充值时间",type:1,allStatus:["已充值","已拒绝"],alertText:"已加载全部充值记录"},r={h3:"提现记录",th1:"提现金额",th2:"提现状态",th3:"提现时间",type:2,allStatus:["已提现","已拒绝"],alertText:"已加载全部提现记录"};return{featureChoose:function(){return"charge"===e.feature?t:"withdraw"===e.feature?r:void 0},addStatusWord:function(t){if("charge"===e.feature){var r=!0,a=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var i=n.value;i.statusChinese=1===i.status?"已充值":"已拒绝充值"}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}}else if("withdraw"===e.feature){var c=!0,l=!1,u=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;p.statusChinese=1===p.status?"已提现":"已拒绝提现"}}catch(e){l=!0,u=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}}return t}}}]).factory("walletToCustomerService",["walletIndexService",function(e){var t={h3:"发起充值",text1:"充值金额:",text2:"充值备注:",text3:"确定充值",httpUrl:"recharge"},r={h3:"发起提现",text1:"提现金额:",text2:"提现备注:",text3:"确定提现",httpUrl:"cash"};return{featureChoose:function(){return"charge"===e.feature?t:"withdraw"===e.feature?r:void 0}}}]).factory("walletToCustomerWaitingService",["walletIndexService","walletToCustomerService",function(e,t){var r={h3:"发起充值",text1:"充值申请发起成功",text2:"充值金额",text3:"充值成功",urlShow:"charge"},a={h3:"发起提现",text1:"提现申请发起成功",text2:"提现金额",text3:"等待彩民确认",urlShow:"withdraw"};return{featureChoose:function(){return"charge"===e.feature?r:"withdraw"===e.feature?a:void 0}}}]);